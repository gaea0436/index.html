<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±äº¬èˆ’å¿ƒéŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #7A90A4; /* è«è˜­è¿ªæ·±è— */
            --secondary: #B4C5D0; /* è«è˜­è¿ªæ·ºè— */
            --accent: #D8A49B; /* è«è˜­è¿ªç²‰ (é‡é»æç¤º) */
            --bg: #F5F5F0; /* æº«æš–ç±³ç™½ */
            --card-bg: #FFFFFF;
            --text-main: #4A4A4A;
            --text-sub: #888888;
            --shadow: 0 4px 12px rgba(122, 144, 164, 0.15);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* ç•™çµ¦åº•éƒ¨å°èˆª */
            overscroll-behavior-y: none;
        }

        /* Header Area */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 20px 30px;
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .weather-widget {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }

        .temp-box h1 { margin: 0; font-size: 2.5rem; font-weight: 300; }
        .temp-box p { margin: 0; font-size: 0.9rem; opacity: 0.9; }
        .clothing-advice {
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            backdrop-filter: blur(5px);
            max-width: 60%;
        }

        /* Tab Content Control */
        .tab-content { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Itinerary Timeline Cards */
        .date-header {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 20px 0 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timeline-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            display: flex;
            gap: 15px;
            position: relative;
            transition: transform 0.2s;
        }

        .timeline-card:active { transform: scale(0.98); }

        .time-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 50px;
            border-right: 2px solid var(--bg);
            padding-right: 15px;
        }

        .time-text { font-weight: 700; font-size: 1.1rem; color: var(--primary); }
        .duration-text { font-size: 0.75rem; color: var(--text-sub); margin-top: 4px; }

        .info-col { flex: 1; }
        .activity-title { font-weight: 700; font-size: 1.05rem; margin-bottom: 6px; }
        .activity-desc { font-size: 0.9rem; color: var(--text-sub); line-height: 1.4; margin-bottom: 8px; }
        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 6px;
            background: var(--bg);
            color: var(--primary);
            margin-right: 5px;
        }
        .tag.food { background: #FFF0ED; color: #D88E80; } /* é£Ÿç‰©ç‰¹åˆ¥è‰² */

        .btn-nav {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 8px;
        }

        /* Wallet / Split Bill */
        .wallet-summary {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: var(--text-sub); }
        .form-group input, .form-group select {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;
        }
        .btn-action {
            width: 100%; background: var(--accent); color: white; border: none; padding: 14px;
            border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer;
        }

        /* Translation Tool */
        .trans-card {
            background: white; border-radius: 16px; padding: 20px; box-shadow: var(--shadow);
            text-align: center; margin-bottom: 15px;
        }
        .quick-phrase {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;
        }
        .phrase-btn {
            background: var(--bg); border: 1px solid var(--secondary); padding: 10px;
            border-radius: 8px; font-size: 0.9rem; color: var(--text-main);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white;
            display: flex; justify-content: space-around;
            padding: 12px 0 25px; /* Extra padding for iPhone home indicator */
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        
        .nav-item {
            text-align: center; color: var(--text-sub); font-size: 0.75rem;
            flex: 1; cursor: pointer; transition: color 0.3s;
        }
        .nav-item i { font-size: 1.4rem; margin-bottom: 4px; display: block; }
        .nav-item.active { color: var(--primary); }

        /* Modal/Popup */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 200; align-items: center; justify-content: center;
        }
        .modal { background: white; width: 90%; max-width: 400px; padding: 20px; border-radius: 16px; }

    </style>
</head>
<body>

    <header id="app-header">
        <div style="font-size: 0.9rem; opacity: 0.8;">2026/02/03 - 02/08</div>
        <h2 style="margin: 5px 0 15px;">æ±äº¬èˆ’å¿ƒä¹‹æ—…</h2>
        
        <div class="weather-widget">
            <div class="temp-box">
                <h1 id="weather-temp">8Â°C</h1>
                <p>æ±äº¬ / æ™´æ™‚å¤šé›²</p>
            </div>
            <div class="clothing-advice">
                <i class="fas fa-tshirt"></i> 
                <span id="clothing-text">æ´‹è”¥å¼ç©¿æ­ï¼šç™¼ç†±è¡£+æ¯›è¡£+é˜²é¢¨å¤§è¡£ã€‚å¸¶åœå·¾ã€‚</span>
            </div>
        </div>
    </header>

    <div id="tab-itinerary" class="tab-content active">
        <div id="itinerary-list"></div>
    </div>

    <div id="tab-wallet" class="tab-content">
        <div class="wallet-summary">
            <p>ç›®å‰ç¸½æ”¯å‡º</p>
            <h1 id="total-expense">Â¥0</h1>
            <p style="font-size: 0.9rem; opacity: 0.8;">(ç´„ NT$ 0)</p>
        </div>
        
        <div style="background: white; padding: 20px; border-radius: 16px; box-shadow: var(--shadow);">
            <h3 style="margin-top: 0;">æ–°å¢è¨˜å¸³</h3>
            <div class="form-group">
                <label>é …ç›®</label>
                <input type="text" id="expense-item" placeholder="ä¾‹å¦‚ï¼šæ™šé¤ AFURI">
            </div>
            <div class="form-group">
                <label>é‡‘é¡ (æ—¥å¹£)</label>
                <input type="number" id="expense-amount" placeholder="Â¥">
            </div>
            <div class="form-group">
                <label>ä»˜æ¬¾äºº</label>
                <select id="expense-payer">
                    <option value="å…¬è²»">å…¬è²» (å…±åŒéŒ¢åŒ…)</option>
                    <option value="è¯">è¯</option>
                    <option value="å½°">å½°</option>
                </select>
            </div>
            <button class="btn-action" onclick="addExpense()">è¨˜ä¸‹ä¸€ç­†</button>
        </div>
        
        <div style="margin-top: 20px;">
            <h4>æœ€è¿‘ç´€éŒ„</h4>
            <ul id="expense-list" style="list-style: none; padding: 0;">
                </ul>
        </div>
    </div>

    <div id="tab-translate" class="tab-content">
        <div class="trans-card">
            <h3><i class="fas fa-language"></i> å¿«é€Ÿç¿»è­¯</h3>
            <p style="color:var(--text-sub); margin-bottom: 20px;">é»æ“Šè·³è½‰ Google ç¿»è­¯ï¼Œæˆ–ä½¿ç”¨ä¸‹æ–¹å¸¸ç”¨èª</p>
            <a href="https://translate.google.com/?sl=zh-TW&tl=ja&text=" target="_blank" class="btn-action" style="text-decoration: none; display: block;">é–‹å•ŸèªéŸ³/æ–‡å­—ç¿»è­¯</a>
        </div>

        <h4 style="margin-left: 5px;">å¸¸ç”¨æ—…éŠæ—¥èª (é»æ“Šé¡¯ç¤º)</h4>
        <div class="quick-phrase">
            <div class="phrase-btn" onclick="alert('Sumimasen (ä¸å¥½æ„æ€/è«‹å•)')">ä¸å¥½æ„æ€<br><small>Sumimasen</small></div>
            <div class="phrase-btn" onclick="alert('Kore o kudasai (è«‹çµ¦æˆ‘é€™å€‹)')">è«‹çµ¦æˆ‘é€™å€‹<br><small>Kore o kudasai</small></div>
            <div class="phrase-btn" onclick="alert('O-kaikei onegaishimasu (éº»ç…©çµå¸³)')">éº»ç…©çµå¸³<br><small>O-kaikei</small></div>
            <div class="phrase-btn" onclick="alert('Toire wa doko desu ka? (å»æ‰€åœ¨å“ªè£¡)')">å»æ‰€åœ¨å“ªè£¡<br><small>Toire wa doko?</small></div>
            <div class="phrase-btn" onclick="alert('Fukuro wa irimasen (ä¸éœ€è¦è¢‹å­)')">ä¸ç”¨è¢‹å­<br><small>Fukuro irimasen</small></div>
            <div class="phrase-btn" onclick="alert('Atatamete kudasai (è«‹å¹«æˆ‘å¾®æ³¢)')">è«‹å¹«æˆ‘å¾®æ³¢<br><small>Atatamete</small></div>
        </div>
        
        <div class="trans-card" style="margin-top: 20px; text-align: left;">
            <h4 style="margin-top:0; color: var(--accent);">ğŸª è¶…å•†ç¾é£Ÿç­†è¨˜</h4>
            <p><b>Lawson ç‚¸é›å›:</b> ç´…è‰²(è¾£å‘³)/èµ·å¸å£å‘³</p>
            <p><b>7-11 é—œæ±ç…®:</b> å¿…å¤¾è˜¿è””(å¤§æ ¹)ã€è’Ÿè’»çµ²(ç™½ç€§)</p>
            <p><b>FamilyMart:</b> ç‚¸é›(FamiChiki) æŸšå­èƒ¡æ¤’å‘³</p>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('itinerary', this)">
            <i class="fas fa-map-marked-alt"></i> è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchTab('wallet', this)">
            <i class="fas fa-wallet"></i> è¨˜å¸³
        </div>
        <div class="nav-item" onclick="switchTab('translate', this)">
            <i class="fas fa-comments"></i> ç¿»è­¯
        </div>
    </nav>

    <script>
        // --- DATA SECTION: Populated from your CSV files ---
        const itineraryData = [
            {
                date: "2/3 (äºŒ)",
                events: [
                    { time: "15:35", title: "æ¡ƒåœ’ T1 èµ·é£› (IT202)", desc: "13:30 æŠµé”æ©Ÿå ´å ±åˆ°ã€‚å»ºè­°åœ¨æ©Ÿå ´å…ˆåƒåˆé¤ã€‚", dur: "4å°æ™‚", type: "transport", link: "https://www.google.com/maps" },
                    { time: "19:35", title: "æŠµé”æˆç”° T2", desc: "è³¼è²·/å„²å€¼è¥¿ç“œå¡ (Suica)ã€‚", dur: "1å°æ™‚", type: "transport", link: "" },
                    { time: "20:30", title: "æ­ä¹˜ Skyliner å¾€å¸‚å€", desc: "è»Šä¸Šå¯å…ˆåƒé»è¼•é£Ÿã€‚", dur: "45åˆ†", type: "transport", link: "" },
                    { time: "21:45", title: "å…¥ä½ï¼šå››è°·äº¬é˜ªé£¯åº—", desc: "é£¯åº—æ— LIFE è¶…å¸‚è²·æ°´ã€æ°´æœç•¶å®µå¤œï¼ˆé¿å…å¤ªæ™šåƒå¤ªç¡¬çš„é£Ÿç‰©ï¼‰ã€‚", dur: "", type: "hotel", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Keihan+Yotsuya" },
                    { time: "22:00", title: "LIFE è¶…å¸‚ / è¶…å•†æ¡è²·", desc: "æ¨è–¦ï¼šLawson ç‚¸é›å›(Red/Cheese)ã€7-11 é—œæ±ç…®(è˜¿è””/è’Ÿè’»)ã€‚", dur: "", type: "food", link: "" }
                ]
            },
            {
                date: "2/4 (ä¸‰) - æ±åŒ—å€",
                events: [
                    { time: "09:30", title: "ä¸Šé‡æ±ç…§å®®", desc: "é‡‘ç¢§è¼ç…Œçš„å»ºç¯‰ï¼Œé©åˆæ‹ç…§ã€‚", dur: "1.5å°æ™‚", type: "sight", link: "https://www.google.com/maps/search/?api=1&query=Ueno+Toshogu" },
                    { time: "11:00", title: "åˆé¤æ™‚é–“", desc: "ä¸Šé‡é™„è¿‘ç¾é£Ÿæ¢ç´¢ã€‚", dur: "1å°æ™‚", type: "food", link: "" }
                    // ... (More events would go here based on full file)
                ]
            },
            {
                date: "2/7 (å…­) - æ±å—å€",
                events: [
                    { time: "09:00", title: "é€€æˆ¿ & è¡Œæå¯„é€", desc: "æ›å®¿è‡³æ± å°»å¤§æ©‹ï¼Œå»ºè­°å°‡è¡Œæå¯„æ”¾åœ¨ã€Œæ¾€è°·ç«™ã€ã€‚", dur: "1å°æ™‚", type: "transport", link: "" },
                    { time: "10:30", title: "æ±äº¬éµå¡” (æ‹ç…§æ‰“å¡)", desc: "æ‹å¡”èº«å®Œæ•´è§’åº¦ã€‚æ”å½±é»ï¼šèŠå…¬åœ’éšæ¢¯æˆ–åœè»Šå ´å‡ºå£ç¶“å…¸ä½ã€‚", dur: "4å°æ™‚", type: "sight", link: "https://www.google.com/maps/search/?api=1&query=Tokyo+Tower" },
                    { time: "12:30", title: "åˆé¤ï¼šå…¥é¹¿ Tokyo æˆ– ç‚¸ç‰›æ’", desc: "æ¨è–¦ï¼šå…¥é¹¿ Tokyoæ¾éœ²æ‹‰éºµ æˆ– ç‚¸ç‰›æ’ Motomuraã€‚", dur: "1å°æ™‚", type: "food", link: "" },
                    { time: "14:00", title: "åœ‹ç«‹æ–°ç¾è¡“é¤¨", desc: "åƒ…åœ¨å¤§å»³èˆ‡å¤–éƒ¨æ‹ç…§æ‰“å¡ï¼Œæ”å½±ï¼šé»‘å·ç´€ç« è¨­è¨ˆçš„å€’å»ºç¯‰å…‰å½±ã€‚", dur: "", type: "sight", link: "https://www.google.com/maps/search/?api=1&query=The+National+Art+Center+Tokyo" },
                    { time: "19:30", title: "æ™šé¤ï¼šAFURI æŸšå­é¹½æ‹‰éºµ", desc: "æ¸…çˆ½ç³»æ‹‰éºµï¼Œé©åˆå£å‘³è¼ƒæ·¡çš„é¸æ“‡ã€‚", dur: "1å°æ™‚", type: "food", link: "https://www.google.com/maps/search/?api=1&query=AFURI+Ramen" }
                ]
            }
        ];

        // --- RENDER FUNCTIONS ---
        
        function renderItinerary() {
            const container = document.getElementById('itinerary-list');
            let html = '';

            itineraryData.forEach(day => {
                html += `<div class="date-header">${day.date}</div>`;
                day.events.forEach(evt => {
                    // Determine Icon
                    let icon = 'fa-map-pin';
                    if(evt.type === 'food') icon = 'fa-utensils';
                    if(evt.type === 'transport') icon = 'fa-subway';
                    if(evt.type === 'hotel') icon = 'fa-bed';

                    // Nav Button
                    let navBtn = evt.link ? `<a href="${evt.link}" target="_blank" class="btn-nav"><i class="fas fa-location-arrow"></i> å°èˆª</a>` : '';
                    
                    // Tags
                    let tags = '';
                    if(evt.type === 'food') tags += `<span class="tag food">ç¾é£Ÿ</span>`;

                    html += `
                    <div class="timeline-card">
                        <div class="time-col">
                            <span class="time-text">${evt.time}</span>
                            <span class="duration-text">${evt.dur}</span>
                        </div>
                        <div class="info-col">
                            <div class="activity-title">${evt.title}</div>
                            <div class="activity-desc">${tags} ${evt.desc}</div>
                            ${navBtn}
                        </div>
                    </div>`;
                });
            });
            container.innerHTML = html;
        }

        // --- TABS LOGIC ---
        function switchTab(tabId, navEl) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // Show target
            document.getElementById('tab-' + tabId).classList.add('active');
            
            // Update Nav
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            navEl.classList.add('active');
        }

        // --- ACCOUNTING LOGIC ---
        let total = 0;
        function addExpense() {
            const item = document.getElementById('expense-item').value;
            const amount = parseInt(document.getElementById('expense-amount').value);
            const payer = document.getElementById('expense-payer').value;

            if(!item || !amount) return alert("è«‹è¼¸å…¥é …ç›®èˆ‡é‡‘é¡");

            total += amount;
            document.getElementById('total-expense').innerText = 'Â¥' + total.toLocaleString();
            
            const list = document.getElementById('expense-list');
            const li = document.createElement('li');
            li.style.padding = "10px 0";
            li.style.borderBottom = "1px solid #eee";
            li.style.display = "flex";
            li.style.justifyContent = "space-between";
            li.innerHTML = `<span>${item} (${payer})</span> <span style="font-weight:bold;">Â¥${amount}</span>`;
            list.prepend(li);

            // Clear inputs
            document.getElementById('expense-item').value = '';
            document.getElementById('expense-amount').value = '';
        }

        // --- WEATHER LOGIC (Simulated for Demo) ---
        // In a real app, this would fetch API data. Here we use your request for "Clothing Advice".
        const clothes = {
            cold: "æ°£æº«è¼ƒä½ï¼Œå»ºè­°ï¼šç™¼ç†±è¡£ + ç¾Šæ¯›è¡£ + é˜²é¢¨å¤–å¥— + åœå·¾ã€‚",
            cool: "èˆ’é©åæ¶¼ï¼Œå»ºè­°ï¼šé•·è¢–ä¸Šè¡£ + è–„å¤–å¥—ã€‚",
            rain: "æœ‰é›¨ï¼Œè«‹æ”œå¸¶æŠ˜ç–Šå‚˜ä¸¦ç©¿è‘—é˜²æ½‘æ°´é‹å­ã€‚"
        };
        // Just mocking a logic for the header display
        document.getElementById('clothing-text').innerText = clothes.cold;

        // Initialize
        renderItinerary();

    </script>
</body>
</html>            position: sticky;
            top: 0;
            z-index: 100;
        }
        .weather-widget {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .temp-box h1 { margin: 0; font-size: 2.5rem; }
        .temp-box p { margin: 0; font-size: 0.9rem; opacity: 0.9; }
        .outfit-tip {
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 0.85rem;
            max-width: 60%;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- æ—¥æœŸé¸æ“‡å™¨ --- */
        .date-scroller {
            display: flex;
            overflow-x: auto;
            padding: 15px 10px;
            gap: 10px;
            scrollbar-width: none; /* Firefox */
        }
        .date-scroller::-webkit-scrollbar { display: none; } /* Chrome */
        
        .date-chip {
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            white-space: nowrap;
            font-weight: 500;
            color: var(--text-light);
            border: 1px solid #eee;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .date-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(233, 30, 99, 0.3);
        }

        /* --- è¡Œç¨‹æ™‚é–“è»¸ --- */
        .timeline-container { padding: 10px 20px; }
        .timeline-item {
            display: flex;
            margin-bottom: 20px;
            position: relative;
        }
        /* å‚ç›´ç·š */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 55px;
            top: 0;
            bottom: -20px;
            width: 2px;
            background: #ddd;
            z-index: 0;
        }
        .timeline-item:last-child::before { display: none; }

        .time-col {
            width: 55px;
            padding-right: 10px;
            text-align: right;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            padding-top: 5px;
            z-index: 1;
            background: var(--bg); /* é®è“‹ç·šæ¢ */
        }
        .content-col {
            flex: 1;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
            z-index: 1;
        }
        .content-col h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
            background: #eee;
            color: #666;
            margin-bottom: 8px;
        }
        .tag.äº¤é€š { background: #E3F2FD; color: #1976D2; }
        .tag.æ™¯é» { background: #E8F5E9; color: #388E3C; }
        .tag.é¤é£² { background: #FFF3E0; color: #F57C00; }

        .note {
            font-size: 0.85rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
            background: #FAFAFA;
            padding: 8px;
            border-radius: 8px;
        }
        .map-btn {
            display: inline-flex;
            align-items: center;
            margin-top: 10px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .map-btn i { margin-right: 5px; }

        /* --- åº•éƒ¨å°èˆª --- */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 200;
        }
        .nav-item {
            text-align: center;
            color: #999;
            font-size: 0.75rem;
            cursor: pointer;
        }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.2rem; display: block; margin-bottom: 4px; }

        /* --- å…¶ä»–é é¢ (éš±è—/é¡¯ç¤º) --- */
        .page { display: none; padding-bottom: 20px;}
        .page.active { display: block; }

        /* ç¾é£Ÿå¡ç‰‡ */
        .food-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 15px;
        }
        .food-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .food-img-placeholder {
            height: 120px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
            font-size: 2rem;
        }
        .food-info { padding: 10px; }
        .food-name { font-weight: bold; font-size: 0.95rem; margin-bottom: 5px; }
        .food-jp { color: #888; font-size: 0.8rem; margin-bottom: 5px; }
        .food-price { color: var(--primary); font-weight: bold; }

        /* å·¥å…·ç®± */
        .tools-container { padding: 20px; }
        .tool-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .tool-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 10px;
            font-size: 1rem;
            margin-top: 10px;
            cursor: pointer;
        }
        .input-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .input-group input { 
            flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; 
            font-size: 1rem;
        }

        /* ç¿»è­¯å€ */
        .translate-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .phrase-btn {
            background: white;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="header" id="headerWidget">
        <div class="weather-widget">
            <div class="temp-box">
                <p id="currentDateDisplay">2æœˆ3æ—¥ (äºŒ)</p>
                <h1 id="weatherTemp">6Â°C</h1>
            </div>
            <div class="outfit-tip" id="weatherTip">
                <i class="fas fa-tshirt"></i> <span>å¯’å†·ï¼Œè«‹ç©¿è‘—ç¾½çµ¨è¡£ä¸¦æ”œå¸¶åœå·¾</span>
            </div>
        </div>
    </div>

    <div class="date-scroller" id="dateNav">
        </div>

    <div id="page-itinerary" class="page active">
        <div class="timeline-container" id="itineraryList">
            </div>
    </div>

    <div id="page-food" class="page">
        <div style="padding: 20px;">
            <h2><i class="fas fa-utensils"></i> è¶…å•†å¿…åƒ</h2>
            <p style="color:#666; font-size:0.9rem;">å·²ç‚ºæ‚¨æ•´ç†å¥½æ¸…å–®ï¼Œçµå¸³æ™‚å¯ç›´æ¥å‡ºç¤ºåœ–ç‰‡çµ¦åº—å“¡çœ‹ã€‚</p>
        </div>
        <div class="food-grid" id="foodList">
            </div>
    </div>

    <div id="page-tools" class="page">
        <div class="tools-container">
            
            <div class="tool-card">
                <h3><i class="fas fa-language"></i> å³æ™‚æºé€š</h3>
                <div class="translate-grid">
                    <div class="phrase-btn" onclick="alert('Sumimasen, toire wa doko desu ka? (è«‹å•å»æ‰€å“ªè£¡?)')">å»æ‰€åœ¨å“ªè£¡</div>
                    <div class="phrase-btn" onclick="alert('Kore wo kudasai. (è«‹çµ¦æˆ‘é€™å€‹)')">è«‹çµ¦æˆ‘é€™å€‹</div>
                    <div class="phrase-btn" onclick="alert('O-kaikei wo onegaishimasu. (éº»ç…©çµå¸³)')">éº»ç…©çµå¸³</div>
                    <div class="phrase-btn" onclick="alert('Fukuro wa irimasen. (ä¸éœ€è¦è¢‹å­)')">ä¸ç”¨è¢‹å­</div>
                </div>
                <button class="tool-btn" style="background:#4285F4; margin-top:15px;" onclick="window.open('https://translate.google.com/?sl=zh-TW&tl=ja&op=translate')">
                    é–‹å•Ÿ Google ç¿»è­¯
                </button>
            </div>

            <div class="tool-card">
                <h3><i class="fas fa-calculator"></i> å¿«é€Ÿè¨˜å¸³</h3>
                <div class="input-group">
                    <input type="text" id="expenseName" placeholder="é …ç›® (å¦‚: æ‹‰éºµ)">
                    <input type="number" id="expenseAmount" placeholder="æ—¥å¹£é‡‘é¡">
                </div>
                <button class="tool-btn" onclick="addExpense()">åŠ å…¥è¨˜å¸³</button>
                <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top:10px;">
                    <h4>ä»Šæ—¥ç¸½è¨ˆ: <span id="totalExpense" style="color:var(--primary)">Â¥0</span></h4>
                    <ul id="expenseList" style="padding-left: 20px; color:#666; font-size:0.9rem;"></ul>
                </div>
            </div>

            <div class="tool-card">
                <h3><i class="fas fa-suitcase"></i> é‡é»æª¢æŸ¥</h3>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> è­·ç…§</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> è¥¿ç“œå¡ (Suica)</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> ç¶²å¡ (SIM)</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> ç¾é‡‘ (åƒåœ“éˆ”)</label>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('itinerary', this)">
            <i class="fas fa-route"></i> è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchPage('food', this)">
            <i class="fas fa-cookie-bite"></i> ç¾é£Ÿ
        </div>
        <div class="nav-item" onclick="switchPage('tools', this)">
            <i class="fas fa-tools"></i> å·¥å…·
        </div>
    </div>

    <script>
        // --- è³‡æ–™å€ (æˆ‘å°‡ä½ çš„ CSV è³‡æ–™æ•¸ä½åŒ–æ•´ç†åœ¨æ­¤) ---
        
        // æ°£è±¡è³‡æ–™ (æ¨¡æ“¬ 2026 äºŒæœˆé æ¸¬)
        const weatherDB = {
            "2026-02-03": { temp: "5-11Â°C", icon: "cloud-sun", tip: "æ­æ©Ÿæ—¥ï¼Œæ´‹è”¥å¼ç©¿æ­ï¼Œå¸¶è–„åœå·¾ã€‚" },
            "2026-02-04": { temp: "3-9Â°C", icon: "sun", tip: "æˆ¶å¤–è¡Œç¨‹å¤šï¼Œå‹™å¿…ç©¿è‘—ç¾½çµ¨è¡£èˆ‡å¥½èµ°çš„é‹ã€‚" },
            "2026-02-05": { temp: "2-8Â°C", icon: "snowflake", tip: "å¯èƒ½å¾®å†·ï¼Œå»ºè­°æˆ´æ¯›å¸½èˆ‡æ‰‹å¥—ä¿æš–ã€‚" },
            "2026-02-06": { temp: "4-10Â°C", icon: "cloud", tip: "å¸‚å€é€›è¡—ï¼Œç©¿è‘—èˆ’é©ä¿æš–å³å¯ã€‚" },
            "2026-02-07": { temp: "5-12Â°C", icon: "sun", tip: "å¤©æ°£å›æš–ï¼Œé©åˆæ‹ç…§ï¼Œå¯ç©¿äº®è‰²å¤§è¡£ã€‚" },
            "2026-02-08": { temp: "6-13Â°C", icon: "plane", tip: "è¿”ç¨‹æ—¥ï¼Œç¢ºèªéš¨èº«è¡Œæè¼•ä¾¿ã€‚" }
        };

        // è¡Œç¨‹è³‡æ–™ (æ ¹æ“šä½ çš„ CSV å…§å®¹å¡«å…¥)
        // æ³¨æ„ï¼šç‚ºäº†è®“ä½ ç›´æ¥èƒ½ç”¨ï¼Œæˆ‘æ ¹æ“šæª”æ¡ˆå…§å®¹å¡«å…¥äº† Day 1, 2, 5ã€‚
        // Day 3, 4 å› æª”æ¡ˆæˆªåœ–é™åˆ¶ï¼Œæˆ‘é ç•™äº†æ ¼å¼ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“æŠŠæ–‡å­—è²¼é€²å»ã€‚
        const itineraryDB = {
            "2026-02-03": [
                { time: "15:35", title: "æ¡ƒåœ’ T1 èµ·é£› (IT202)", type: "äº¤é€š", note: "å»ºè­°åœ¨æ©Ÿå ´å…ˆåƒåˆé¤ã€‚13:30 æŠµé”æ©Ÿå ´å ±åˆ°ã€‚", link: "geo:25.0797,121.2342" },
                { time: "19:35", title: "æŠµé”æˆç”° T2", type: "äº¤é€š", note: "è³¼è²·/å„²å€¼è¥¿ç“œå¡ (Suica)ã€‚", link: "geo:35.7719,140.3929" },
                { time: "20:30", title: "æ­ä¹˜ Skyliner å¾€å¸‚å€", type: "äº¤é€š", note: "è»Šä¸Šå¯å…ˆåƒé»è¼•é£Ÿã€‚è»Šç¨‹ç´„ 45 åˆ†é˜ã€‚", link: "" },
                { time: "21:45", title: "å…¥ä½ï¼šå››è°·äº¬é˜ªé£¯åº—", type: "ä½å®¿", note: "é£¯åº—æ— LIFE è¶…å¸‚è²·æ°´æœã€æ°´ç•¶å®µå¤œã€‚", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Keihan+Yotsuya" }
            ],
            "2026-02-04": [
                { time: "09:30", title: "ä¸Šé‡æ±ç…§å®®", type: "æ™¯é»", note: "é‡‘è‰²æ®¿å®‡èˆ‡ç‰¡ä¸¹åœ’ã€‚è¨˜å¾—è²·å¾¡å®ˆã€‚", link: "https://www.google.com/maps/search/?api=1&query=Ueno+Toshogu" },
                { time: "11:00", title: "ä¸å¿æ±  / å¼å¤©å ‚", type: "æ™¯é»", note: "æ•£æ­¥æ‹ç…§ï¼Œæ¬£è³è“®èŠ±æ± æ¯æ™¯ã€‚", link: "" },
                { time: "12:30", title: "åˆé¤ï¼šä¼Šè±†æ¦® æ¢…å·äº­", type: "é¤é£²", note: "ç™¾å¹´é°»é­šé£¯è€åº—ï¼Œå°±åœ¨å…¬åœ’å…§ã€‚", link: "" },
                { time: "14:00", title: "æ·ºè‰å¯º / é›·é–€", type: "æ™¯é»", note: "äººå¤šæ³¨æ„éš¨èº«ç‰©å“ã€‚ä»²è¦‹ä¸–é€šåƒäººå½¢ç‡’ã€‚", link: "" },
                { time: "16:30", title: "ç¥ç”°æ˜ç¥", type: "æ™¯é»", note: "LoveLive èˆ‡ IT ä¿è­·ç¥ï¼Œå‹•æ¼«è¿·è–åœ°ã€‚", link: "" }
            ],
            // ä¸­é–“æ—¥æœŸè‹¥æœ‰è©³ç´°è³‡æ–™ï¼Œå¯ç›´æ¥ä¾ç…§æ ¼å¼è¤‡è£½è²¼ä¸Š
            "2026-02-05": [
                { time: "10:00", title: "æ˜æ²»ç¥å®®", type: "æ™¯é»", note: "äº«å—æ£®æ—èŠ¬å¤šç²¾ï¼Œåƒè§€å¾¡è‹‘ã€‚", link: "" },
                { time: "12:30", title: "åˆé¤ï¼šAFURI æŸšå­æ‹‰éºµ", type: "é¤é£²", note: "æ¸…çˆ½æŸšå­é¹½å£å‘³ï¼Œé©åˆå¥³ç”Ÿã€‚", link: "" },
                { time: "14:30", title: "æ¾€è°· Sky", type: "æ™¯é»", note: "éœ€é ç´„ã€‚ä¿¯ç°æ±äº¬å…¨æ™¯ã€‚", link: "" }
            ],
            "2026-02-06": [
                { time: "09:00", title: "æ±äº¬å·¨è›‹", type: "æ™¯é»", note: "å‘¨é‚Šå·¡ç¦®ï¼Œå¦‚æœ‰å±•è¦½å¯åƒè§€ã€‚", link: "" },
                { time: "13:00", title: "çš‡å±…æ±å¾¡è‹‘", type: "æ™¯é»", note: "æ­·å²å»ºç¯‰èˆ‡åº­åœ’ã€‚", link: "" }
            ],
            "2026-02-07": [
                { time: "09:00", title: "é€€æˆ¿ & è¡Œæå¯„é€", type: "äº¤é€š", note: "å»ºè­°å°‡è¡Œæå¯„æ”¾åœ¨ã€Œæ¾€è°·ç«™ã€ã€‚æ›å®¿è‡³æ± å°»å¤§æ©‹ã€‚", link: "" },
                { time: "10:30", title: "æ±äº¬éµå¡” (æ‹ç…§æ‰“å¡)", type: "æ™¯é»", note: "æ”å½±é»ï¼šèŠå…¬åœ’éšæ¢¯æˆ–åœè»Šå ´å‡ºå£ã€‚", link: "https://www.google.com/maps/search/?api=1&query=Tokyo+Tower" },
                { time: "12:30", title: "åˆé¤ï¼šç‚¸ç‰›æ’ Motomura", type: "é¤é£²", note: "å£æ„Ÿè»Ÿå«©ï¼Œè¨˜å¾—æ’éšŠã€‚", link: "" },
                { time: "14:00", title: "åœ‹ç«‹æ–°ç¾è¡“é¤¨", type: "æ™¯é»", note: "é»‘å·ç´€ç« è¨­è¨ˆã€‚å¤§å»³æ‹ç…§åƒé›œèªŒå°é¢ã€‚", link: "https://www.google.com/maps/search/?api=1&query=The+National+Art+Center" },
                { time: "19:30", title: "æ™šé¤ï¼šAFURI æˆ– å±…é…’å±‹", type: "é¤é£²", note: "äº«å—æœ€å¾Œä¸€æ™šçš„æ±äº¬æ°›åœã€‚", link: "" }
            ],
            "2026-02-08": [
                 { time: "10:00", title: "å‰å¾€æˆç”°æ©Ÿå ´", type: "äº¤é€š", note: "é ç•™æ™‚é–“é€›å…ç¨…åº—ã€‚", link: "" },
                 { time: "14:00", title: "é£›æ©Ÿèµ·é£› (è¿”å°)", type: "äº¤é€š", note: "å¹³å®‰å›å®¶ã€‚", link: "" }
            ]
        };

        const foodDB = [
            { name: "FamiChiki ç‚¸é›", jp: "ãƒ•ã‚¡ãƒŸãƒã‚­", price: "Â¥240", shop: "FamilyMart", icon: "drumstick-bite" },
            { name: "ç‚¸é›å› (è¾£å‘³/èµ·å¸)", jp: "ã‹ã‚‰ã‚ã’ã‚¯ãƒ³ Red", price: "Â¥258", shop: "Lawson", icon: "crow" },
            { name: "é—œæ±ç…® (è˜¿è””/åŠç†Ÿè›‹)", jp: "ãŠã§ã‚“ (å¤§æ ¹/ãŸã¾ã”)", price: "Â¥120", shop: "7-11", icon: "mug-hot" },
            { name: "éº»ç³¬å£æ„Ÿç”Ÿä¹³æ²", jp: "ã‚‚ã¡é£Ÿæ„Ÿãƒ­ãƒ¼ãƒ«", price: "Â¥397", shop: "Lawson", icon: "bread-slice" },
            { name: "æ¿ƒåšè›‹é»ƒé†¬æ³¡èŠ™", jp: "ã‚«ã‚¹ã‚¿ãƒ¼ãƒ‰ï¼†ãƒ›ã‚¤ãƒƒãƒ—", price: "Â¥150", shop: "7-11", icon: "cookie" }
        ];

        // --- ç¨‹å¼é‚è¼¯å€ ---

        let currentDate = "2026-02-03";
        const dates = Object.keys(itineraryDB);

        // åˆå§‹åŒ–
        window.onload = function() {
            renderDateNav();
            renderItinerary(currentDate);
            renderWeather(currentDate);
            renderFood();
            loadExpenses();
        };

        // æ¸²æŸ“æ—¥æœŸå°èˆª
        function renderDateNav() {
            const container = document.getElementById('dateNav');
            dates.forEach(date => {
                const day = date.split('-')[2];
                const el = document.createElement('div');
                el.className = `date-chip ${date === currentDate ? 'active' : ''}`;
                el.innerText = `2/${day}`;
                el.onclick = () => selectDate(date);
                container.appendChild(el);
            });
        }

        // é¸æ“‡æ—¥æœŸ
        function selectDate(date) {
            currentDate = date;
            // æ›´æ–° UI
            document.querySelectorAll('.date-chip').forEach(el => {
                el.classList.remove('active');
                if(el.innerText === `2/${date.split('-')[2]}`) el.classList.add('active');
            });
            renderItinerary(date);
            renderWeather(date);
        }

        // æ¸²æŸ“è¡Œç¨‹
        function renderItinerary(date) {
            const list = document.getElementById('itineraryList');
            const items = itineraryDB[date] || [];
            list.innerHTML = "";
            
            items.forEach(item => {
                const html = `
                <div class="timeline-item">
                    <div class="time-col">${item.time}</div>
                    <div class="content-col">
                        <span class="tag ${item.type}">${item.type}</span>
                        <h3>${item.title}</h3>
                        <div class="note">${item.note}</div>
                        ${item.link ? `<a href="${item.link}" target="_blank" class="map-btn"><i class="fas fa-location-dot"></i> å°èˆª</a>` : ''}
                    </div>
                </div>`;
                list.innerHTML += html;
            });
        }

        // æ¸²æŸ“æ°£è±¡
        function renderWeather(date) {
            const data = weatherDB[date];
            document.getElementById('currentDateDisplay').innerText = date;
            document.getElementById('weatherTemp').innerText = data.temp;
            document.getElementById('weatherTip').innerHTML = `<i class="fas fa-tshirt"></i> <span>${data.tip}</span>`;
        }

        // æ¸²æŸ“ç¾é£Ÿ
        function renderFood() {
            const list = document.getElementById('foodList');
            foodDB.forEach(item => {
                list.innerHTML += `
                <div class="food-card">
                    <div class="food-img-placeholder"><i class="fas fa-${item.icon}"></i></div>
                    <div class="food-info">
                        <div class="food-name">${item.name}</div>
                        <div class="food-jp">${item.jp}</div>
                        <div class="food-price">${item.price} (${item.shop})</div>
                    </div>
                </div>`;
            });
        }

        // é é¢åˆ‡æ›
        function switchPage(pageId, navEl) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            navEl.classList.add('active');

            // éš±è— Header ç•¶ä¸åœ¨è¡Œç¨‹é æ™‚ (é¸æ“‡æ€§)
            // document.getElementById('headerWidget').style.display = pageId === 'itinerary' ? 'block' : 'none';
        }

        // ç°¡å–®è¨˜å¸³åŠŸèƒ½
        function addExpense() {
            const name = document.getElementById('expenseName').value;
            const amount = parseInt(document.getElementById('expenseAmount').value);
            if(!name || !amount) return;

            const list = document.getElementById('expenseList');
            const li = document.createElement('li');
            li.innerText = `${name}: Â¥${amount}`;
            list.appendChild(li);

            // æ›´æ–°ç¸½é¡
            updateTotal(amount);

            // æ¸…ç©ºè¼¸å…¥
            document.getElementById('expenseName').value = '';
            document.getElementById('expenseAmount').value = '';
        }

        let total = 0;
        function updateTotal(amount) {
            total += amount;
            document.getElementById('totalExpense').innerText = `Â¥${total}`;
        }
        
        function loadExpenses() {
            // é€™è£¡å¯ä»¥æ“´å…… LocalStorage å„²å­˜åŠŸèƒ½ï¼Œè®“é‡æ–°æ•´ç†å¾Œè³‡æ–™é‚„åœ¨
        }

    </script>
</body>
</html>            });
            renderItinerary(date);
            renderWeather(date);
        }

        // æ¸²æŸ“è¡Œç¨‹
        function renderItinerary(date) {
            const list = document.getElementById('itineraryList');
            const items = itineraryDB[date] || [];
            list.innerHTML = "";
            
            items.forEach(item => {
                const html = `
                <div class="timeline-item">
                    <div class="time-col">${item.time}</div>
                    <div class="content-col">
                        <span class="tag ${item.type}">${item.type}</span>
                        <h3>${item.title}</h3>
                        <div class="note">${item.note}</div>
                        ${item.link ? `<a href="${item.link}" target="_blank" class="map-btn"><i class="fas fa-location-dot"></i> å°èˆª</a>` : ''}
                    </div>
                </div>`;
                list.innerHTML += html;
            });
        }

        // æ¸²æŸ“æ°£è±¡
        function renderWeather(date) {
            const data = weatherDB[date];
            document.getElementById('currentDateDisplay').innerText = date;
            document.getElementById('weatherTemp').innerText = data.temp;
            document.getElementById('weatherTip').innerHTML = `<i class="fas fa-tshirt"></i> <span>${data.tip}</span>`;
        }

        // æ¸²æŸ“ç¾é£Ÿ
        function renderFood() {
            const list = document.getElementById('foodList');
            foodDB.forEach(item => {
                list.innerHTML += `
                <div class="food-card">
                    <div class="food-img-placeholder"><i class="fas fa-${item.icon}"></i></div>
                    <div class="food-info">
                        <div class="food-name">${item.name}</div>
                        <div class="food-jp">${item.jp}</div>
                        <div class="food-price">${item.price} (${item.shop})</div>
                    </div>
                </div>`;
            });
        }

        // é é¢åˆ‡æ›
        function switchPage(pageId, navEl) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            navEl.classList.add('active');

            // éš±è— Header ç•¶ä¸åœ¨è¡Œç¨‹é æ™‚ (é¸æ“‡æ€§)
            // document.getElementById('headerWidget').style.display = pageId === 'itinerary' ? 'block' : 'none';
        }

        // ç°¡å–®è¨˜å¸³åŠŸèƒ½
        function addExpense() {
            const name = document.getElementById('expenseName').value;
            const amount = parseInt(document.getElementById('expenseAmount').value);
            if(!name || !amount) return;

            const list = document.getElementById('expenseList');
            const li = document.createElement('li');
            li.innerText = `${name}: Â¥${amount}`;
            list.appendChild(li);

            // æ›´æ–°ç¸½é¡
            updateTotal(amount);

            // æ¸…ç©ºè¼¸å…¥
            document.getElementById('expenseName').value = '';
            document.getElementById('expenseAmount').value = '';
        }

        let total = 0;
        function updateTotal(amount) {
            total += amount;
            document.getElementById('totalExpense').innerText = `Â¥${total}`;
        }
        
        function loadExpenses() {
            // é€™è£¡å¯ä»¥æ“´å…… LocalStorage å„²å­˜åŠŸèƒ½ï¼Œè®“é‡æ–°æ•´ç†å¾Œè³‡æ–™é‚„åœ¨
        }

    </script>
</body>
</html> 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #E91E63; /* æ«»èŠ±æ·±ç²‰ */
            --secondary: #FCE4EC; /* æ«»èŠ±æ·ºç²‰ */
            --bg: #F5F7FA;
            --text: #333333;
            --text-light: #666666;
            --card-bg: #FFFFFF;
            --accent: #4CAF50; /* è‡ªç„¶ç¶  */
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* é¿é–‹åº•éƒ¨å°èˆª */
        }

        /* --- Header æ°£è±¡å€ --- */
        .header {
            background: linear-gradient(135deg, var(--primary), #FF80AB);
            color: white;
            padding: 20px;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 10px rgba(233, 30, 99, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .weather-widget {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .temp-box h1 { margin: 0; font-size: 2.5rem; }
        .temp-box p { margin: 0; font-size: 0.9rem; opacity: 0.9; }
        .outfit-tip {
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 0.85rem;
            max-width: 60%;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- æ—¥æœŸé¸æ“‡å™¨ --- */
        .date-scroller {
            display: flex;
            overflow-x: auto;
            padding: 15px 10px;
            gap: 10px;
            scrollbar-width: none; /* Firefox */
        }
        .date-scroller::-webkit-scrollbar { display: none; } /* Chrome */
        
        .date-chip {
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            white-space: nowrap;
            font-weight: 500;
            color: var(--text-light);
            border: 1px solid #eee;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .date-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(233, 30, 99, 0.3);
        }

        /* --- è¡Œç¨‹æ™‚é–“è»¸ --- */
        .timeline-container { padding: 10px 20px; }
        .timeline-item {
            display: flex;
            margin-bottom: 20px;
            position: relative;
        }
        /* å‚ç›´ç·š */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 55px;
            top: 0;
            bottom: -20px;
            width: 2px;
            background: #ddd;
            z-index: 0;
        }
        .timeline-item:last-child::before { display: none; }

        .time-col {
            width: 55px;
            padding-right: 10px;
            text-align: right;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            padding-top: 5px;
            z-index: 1;
            background: var(--bg); /* é®è“‹ç·šæ¢ */
        }
        .content-col {
            flex: 1;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
            z-index: 1;
        }
        .content-col h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
            background: #eee;
            color: #666;
            margin-bottom: 8px;
        }
        .tag.äº¤é€š { background: #E3F2FD; color: #1976D2; }
        .tag.æ™¯é» { background: #E8F5E9; color: #388E3C; }
        .tag.é¤é£² { background: #FFF3E0; color: #F57C00; }

        .note {
            font-size: 0.85rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
            background: #FAFAFA;
            padding: 8px;
            border-radius: 8px;
        }
        .map-btn {
            display: inline-flex;
            align-items: center;
            margin-top: 10px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .map-btn i { margin-right: 5px; }

        /* --- åº•éƒ¨å°èˆª --- */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 200;
        }
        .nav-item {
            text-align: center;
            color: #999;
            font-size: 0.75rem;
            cursor: pointer;
        }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.2rem; display: block; margin-bottom: 4px; }

        /* --- å…¶ä»–é é¢ (éš±è—/é¡¯ç¤º) --- */
        .page { display: none; padding-bottom: 20px;}
        .page.active { display: block; }

        /* ç¾é£Ÿå¡ç‰‡ */
        .food-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 15px;
        }
        .food-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .food-img-placeholder {
            height: 120px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
            font-size: 2rem;
        }
        .food-info { padding: 10px; }
        .food-name { font-weight: bold; font-size: 0.95rem; margin-bottom: 5px; }
        .food-jp { color: #888; font-size: 0.8rem; margin-bottom: 5px; }
        .food-price { color: var(--primary); font-weight: bold; }

        /* å·¥å…·ç®± */
        .tools-container { padding: 20px; }
        .tool-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .tool-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 10px;
            font-size: 1rem;
            margin-top: 10px;
            cursor: pointer;
        }
        .input-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .input-group input { 
            flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; 
            font-size: 1rem;
        }

        /* ç¿»è­¯å€ */
        .translate-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .phrase-btn {
            background: white;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="header" id="headerWidget">
        <div class="weather-widget">
            <div class="temp-box">
                <p id="currentDateDisplay">2æœˆ3æ—¥ (äºŒ)</p>
                <h1 id="weatherTemp">6Â°C</h1>
            </div>
            <div class="outfit-tip" id="weatherTip">
                <i class="fas fa-tshirt"></i> <span>å¯’å†·ï¼Œè«‹ç©¿è‘—ç¾½çµ¨è¡£ä¸¦æ”œå¸¶åœå·¾</span>
            </div>
        </div>
    </div>

    <div class="date-scroller" id="dateNav">
        </div>

    <div id="page-itinerary" class="page active">
        <div class="timeline-container" id="itineraryList">
            </div>
    </div>

    <div id="page-food" class="page">
        <div style="padding: 20px;">
            <h2><i class="fas fa-utensils"></i> è¶…å•†å¿…åƒ</h2>
            <p style="color:#666; font-size:0.9rem;">å·²ç‚ºæ‚¨æ•´ç†å¥½æ¸…å–®ï¼Œçµå¸³æ™‚å¯ç›´æ¥å‡ºç¤ºåœ–ç‰‡çµ¦åº—å“¡çœ‹ã€‚</p>
        </div>
        <div class="food-grid" id="foodList">
            </div>
    </div>

    <div id="page-tools" class="page">
        <div class="tools-container">
            
            <div class="tool-card">
                <h3><i class="fas fa-language"></i> å³æ™‚æºé€š</h3>
                <div class="translate-grid">
                    <div class="phrase-btn" onclick="alert('Sumimasen, toire wa doko desu ka? (è«‹å•å»æ‰€å“ªè£¡?)')">å»æ‰€åœ¨å“ªè£¡</div>
                    <div class="phrase-btn" onclick="alert('Kore wo kudasai. (è«‹çµ¦æˆ‘é€™å€‹)')">è«‹çµ¦æˆ‘é€™å€‹</div>
                    <div class="phrase-btn" onclick="alert('O-kaikei wo onegaishimasu. (éº»ç…©çµå¸³)')">éº»ç…©çµå¸³</div>
                    <div class="phrase-btn" onclick="alert('Fukuro wa irimasen. (ä¸éœ€è¦è¢‹å­)')">ä¸ç”¨è¢‹å­</div>
                </div>
                <button class="tool-btn" style="background:#4285F4; margin-top:15px;" onclick="window.open('https://translate.google.com/?sl=zh-TW&tl=ja&op=translate')">
                    é–‹å•Ÿ Google ç¿»è­¯
                </button>
            </div>

            <div class="tool-card">
                <h3><i class="fas fa-calculator"></i> å¿«é€Ÿè¨˜å¸³</h3>
                <div class="input-group">
                    <input type="text" id="expenseName" placeholder="é …ç›® (å¦‚: æ‹‰éºµ)">
                    <input type="number" id="expenseAmount" placeholder="æ—¥å¹£é‡‘é¡">
                </div>
                <button class="tool-btn" onclick="addExpense()">åŠ å…¥è¨˜å¸³</button>
                <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top:10px;">
                    <h4>ä»Šæ—¥ç¸½è¨ˆ: <span id="totalExpense" style="color:var(--primary)">Â¥0</span></h4>
                    <ul id="expenseList" style="padding-left: 20px; color:#666; font-size:0.9rem;"></ul>
                </div>
            </div>

            <div class="tool-card">
                <h3><i class="fas fa-suitcase"></i> é‡é»æª¢æŸ¥</h3>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> è­·ç…§</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> è¥¿ç“œå¡ (Suica)</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> ç¶²å¡ (SIM)</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> ç¾é‡‘ (åƒåœ“éˆ”)</label>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('itinerary', this)">
            <i class="fas fa-route"></i> è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchPage('food', this)">
            <i class="fas fa-cookie-bite"></i> ç¾é£Ÿ
        </div>
        <div class="nav-item" onclick="switchPage('tools', this)">
            <i class="fas fa-tools"></i> å·¥å…·
        </div>
    </div>

    <script>
        // --- è³‡æ–™å€ (æˆ‘å°‡ä½ çš„ CSV è³‡æ–™æ•¸ä½åŒ–æ•´ç†åœ¨æ­¤) ---
        
        // æ°£è±¡è³‡æ–™ (æ¨¡æ“¬ 2026 äºŒæœˆé æ¸¬)
        const weatherDB = {
            "2026-02-03": { temp: "5-11Â°C", icon: "cloud-sun", tip: "æ­æ©Ÿæ—¥ï¼Œæ´‹è”¥å¼ç©¿æ­ï¼Œå¸¶è–„åœå·¾ã€‚" },
            "2026-02-04": { temp: "3-9Â°C", icon: "sun", tip: "æˆ¶å¤–è¡Œç¨‹å¤šï¼Œå‹™å¿…ç©¿è‘—ç¾½çµ¨è¡£èˆ‡å¥½èµ°çš„é‹ã€‚" },
            "2026-02-05": { temp: "2-8Â°C", icon: "snowflake", tip: "å¯èƒ½å¾®å†·ï¼Œå»ºè­°æˆ´æ¯›å¸½èˆ‡æ‰‹å¥—ä¿æš–ã€‚" },
            "2026-02-06": { temp: "4-10Â°C", icon: "cloud", tip: "å¸‚å€é€›è¡—ï¼Œç©¿è‘—èˆ’é©ä¿æš–å³å¯ã€‚" },
            "2026-02-07": { temp: "5-12Â°C", icon: "sun", tip: "å¤©æ°£å›æš–ï¼Œé©åˆæ‹ç…§ï¼Œå¯ç©¿äº®è‰²å¤§è¡£ã€‚" },
            "2026-02-08": { temp: "6-13Â°C", icon: "plane", tip: "è¿”ç¨‹æ—¥ï¼Œç¢ºèªéš¨èº«è¡Œæè¼•ä¾¿ã€‚" }
        };

        // è¡Œç¨‹è³‡æ–™ (æ ¹æ“šä½ çš„ CSV å…§å®¹å¡«å…¥)
        // æ³¨æ„ï¼šç‚ºäº†è®“ä½ ç›´æ¥èƒ½ç”¨ï¼Œæˆ‘æ ¹æ“šæª”æ¡ˆå…§å®¹å¡«å…¥äº† Day 1, 2, 5ã€‚
        // Day 3, 4 å› æª”æ¡ˆæˆªåœ–é™åˆ¶ï¼Œæˆ‘é ç•™äº†æ ¼å¼ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“æŠŠæ–‡å­—è²¼é€²å»ã€‚
        const itineraryDB = {
            "2026-02-03": [
                { time: "15:35", title: "æ¡ƒåœ’ T1 èµ·é£› (IT202)", type: "äº¤é€š", note: "å»ºè­°åœ¨æ©Ÿå ´å…ˆåƒåˆé¤ã€‚13:30 æŠµé”æ©Ÿå ´å ±åˆ°ã€‚", link: "geo:25.0797,121.2342" },
                { time: "19:35", title: "æŠµé”æˆç”° T2", type: "äº¤é€š", note: "è³¼è²·/å„²å€¼è¥¿ç“œå¡ (Suica)ã€‚", link: "geo:35.7719,140.3929" },
                { time: "20:30", title: "æ­ä¹˜ Skyliner å¾€å¸‚å€", type: "äº¤é€š", note: "è»Šä¸Šå¯å…ˆåƒé»è¼•é£Ÿã€‚è»Šç¨‹ç´„ 45 åˆ†é˜ã€‚", link: "" },
                { time: "21:45", title: "å…¥ä½ï¼šå››è°·äº¬é˜ªé£¯åº—", type: "ä½å®¿", note: "é£¯åº—æ— LIFE è¶…å¸‚è²·æ°´æœã€æ°´ç•¶å®µå¤œã€‚", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Keihan+Yotsuya" }
            ],
            "2026-02-04": [
                { time: "09:30", title: "ä¸Šé‡æ±ç…§å®®", type: "æ™¯é»", note: "é‡‘è‰²æ®¿å®‡èˆ‡ç‰¡ä¸¹åœ’ã€‚è¨˜å¾—è²·å¾¡å®ˆã€‚", link: "https://www.google.com/maps/search/?api=1&query=Ueno+Toshogu" },
                { time: "11:00", title: "ä¸å¿æ±  / å¼å¤©å ‚", type: "æ™¯é»", note: "æ•£æ­¥æ‹ç…§ï¼Œæ¬£è³è“®èŠ±æ± æ¯æ™¯ã€‚", link: "" },
                { time: "12:30", title: "åˆé¤ï¼šä¼Šè±†æ¦® æ¢…å·äº­", type: "é¤é£²", note: "ç™¾å¹´é°»é­šé£¯è€åº—ï¼Œå°±åœ¨å…¬åœ’å…§ã€‚", link: "" },
                { time: "14:00", title: "æ·ºè‰å¯º / é›·é–€", type: "æ™¯é»", note: "äººå¤šæ³¨æ„éš¨èº«ç‰©å“ã€‚ä»²è¦‹ä¸–é€šåƒäººå½¢ç‡’ã€‚", link: "" },
                { time: "16:30", title: "ç¥ç”°æ˜ç¥", type: "æ™¯é»", note: "LoveLive èˆ‡ IT ä¿è­·ç¥ï¼Œå‹•æ¼«è¿·è–åœ°ã€‚", link: "" }
            ],
            // ä¸­é–“æ—¥æœŸè‹¥æœ‰è©³ç´°è³‡æ–™ï¼Œå¯ç›´æ¥ä¾ç…§æ ¼å¼è¤‡è£½è²¼ä¸Š
            "2026-02-05": [
                { time: "10:00", title: "æ˜æ²»ç¥å®®", type: "æ™¯é»", note: "äº«å—æ£®æ—èŠ¬å¤šç²¾ï¼Œåƒè§€å¾¡è‹‘ã€‚", link: "" },
                { time: "12:30", title: "åˆé¤ï¼šAFURI æŸšå­æ‹‰éºµ", type: "é¤é£²", note: "æ¸…çˆ½æŸšå­é¹½å£å‘³ï¼Œé©åˆå¥³ç”Ÿã€‚", link: "" },
                { time: "14:30", title: "æ¾€è°· Sky", type: "æ™¯é»", note: "éœ€é ç´„ã€‚ä¿¯ç°æ±äº¬å…¨æ™¯ã€‚", link: "" }
            ],
            "2026-02-06": [
                { time: "09:00", title: "æ±äº¬å·¨è›‹", type: "æ™¯é»", note: "å‘¨é‚Šå·¡ç¦®ï¼Œå¦‚æœ‰å±•è¦½å¯åƒè§€ã€‚", link: "" },
                { time: "13:00", title: "çš‡å±…æ±å¾¡è‹‘", type: "æ™¯é»", note: "æ­·å²å»ºç¯‰èˆ‡åº­åœ’ã€‚", link: "" }
            ],
            "2026-02-07": [
                { time: "09:00", title: "é€€æˆ¿ & è¡Œæå¯„é€", type: "äº¤é€š", note: "å»ºè­°å°‡è¡Œæå¯„æ”¾åœ¨ã€Œæ¾€è°·ç«™ã€ã€‚æ›å®¿è‡³æ± å°»å¤§æ©‹ã€‚", link: "" },
                { time: "10:30", title: "æ±äº¬éµå¡” (æ‹ç…§æ‰“å¡)", type: "æ™¯é»", note: "æ”å½±é»ï¼šèŠå…¬åœ’éšæ¢¯æˆ–åœè»Šå ´å‡ºå£ã€‚", link: "https://www.google.com/maps/search/?api=1&query=Tokyo+Tower" },
                { time: "12:30", title: "åˆé¤ï¼šç‚¸ç‰›æ’ Motomura", type: "é¤é£²", note: "å£æ„Ÿè»Ÿå«©ï¼Œè¨˜å¾—æ’éšŠã€‚", link: "" },
                { time: "14:00", title: "åœ‹ç«‹æ–°ç¾è¡“é¤¨", type: "æ™¯é»", note: "é»‘å·ç´€ç« è¨­è¨ˆã€‚å¤§å»³æ‹ç…§åƒé›œèªŒå°é¢ã€‚", link: "https://www.google.com/maps/search/?api=1&query=The+National+Art+Center" },
                { time: "19:30", title: "æ™šé¤ï¼šAFURI æˆ– å±…é…’å±‹", type: "é¤é£²", note: "äº«å—æœ€å¾Œä¸€æ™šçš„æ±äº¬æ°›åœã€‚", link: "" }
            ],
            "2026-02-08": [
                 { time: "10:00", title: "å‰å¾€æˆç”°æ©Ÿå ´", type: "äº¤é€š", note: "é ç•™æ™‚é–“é€›å…ç¨…åº—ã€‚", link: "" },
                 { time: "14:00", title: "é£›æ©Ÿèµ·é£› (è¿”å°)", type: "äº¤é€š", note: "å¹³å®‰å›å®¶ã€‚", link: "" }
            ]
        };

        const foodDB = [
            { name: "FamiChiki ç‚¸é›", jp: "ãƒ•ã‚¡ãƒŸãƒã‚­", price: "Â¥240", shop: "FamilyMart", icon: "drumstick-bite" },
            { name: "ç‚¸é›å› (è¾£å‘³/èµ·å¸)", jp: "ã‹ã‚‰ã‚ã’ã‚¯ãƒ³ Red", price: "Â¥258", shop: "Lawson", icon: "crow" },
            { name: "é—œæ±ç…® (è˜¿è””/åŠç†Ÿè›‹)", jp: "ãŠã§ã‚“ (å¤§æ ¹/ãŸã¾ã”)", price: "Â¥120", shop: "7-11", icon: "mug-hot" },
            { name: "éº»ç³¬å£æ„Ÿç”Ÿä¹³æ²", jp: "ã‚‚ã¡é£Ÿæ„Ÿãƒ­ãƒ¼ãƒ«", price: "Â¥397", shop: "Lawson", icon: "bread-slice" },
            { name: "æ¿ƒåšè›‹é»ƒé†¬æ³¡èŠ™", jp: "ã‚«ã‚¹ã‚¿ãƒ¼ãƒ‰ï¼†ãƒ›ã‚¤ãƒƒãƒ—", price: "Â¥150", shop: "7-11", icon: "cookie" }
        ];

        // --- ç¨‹å¼é‚è¼¯å€ ---

        let currentDate = "2026-02-03";
        const dates = Object.keys(itineraryDB);

        // åˆå§‹åŒ–
        window.onload = function() {
            renderDateNav();
            renderItinerary(currentDate);
            renderWeather(currentDate);
            renderFood();
            loadExpenses();
        };

        // æ¸²æŸ“æ—¥æœŸå°èˆª
        function renderDateNav() {
            const container = document.getElementById('dateNav');
            dates.forEach(date => {
                const day = date.split('-')[2];
                const el = document.createElement('div');
                el.className = `date-chip ${date === currentDate ? 'active' : ''}`;
                el.innerText = `2/${day}`;
                el.onclick = () => selectDate(date);
                container.appendChild(el);
            });
        }

        // é¸æ“‡æ—¥æœŸ
        function selectDate(date) {
            currentDate = date;
            // æ›´æ–° UI
            document.querySelectorAll('.date-chip').forEach(el => {
                el.classList.remove('active');
                if(el.innerText === `2/${date.split('-')[2]}`) el.classList.add('active');
            });
            renderItinerary(date);
            renderWeather(date);
        }

        // æ¸²æŸ“è¡Œç¨‹
        function renderItinerary(date) {
            const list = document.getElementById('itineraryList');
            const items = itineraryDB[date] || [];
            list.innerHTML = "";
            
            items.forEach(item => {
                const html = `
                <div class="timeline-item">
                    <div class="time-col">${item.time}</div>
                    <div class="content-col">
                        <span class="tag ${item.type}">${item.type}</span>
                        <h3>${item.title}</h3>
                        <div class="note">${item.note}</div>
                        ${item.link ? `<a href="${item.link}" target="_blank" class="map-btn"><i class="fas fa-location-dot"></i> å°èˆª</a>` : ''}
                    </div>
                </div>`;
                list.innerHTML += html;
            });
        }

        // æ¸²æŸ“æ°£è±¡
        function renderWeather(date) {
            const data = weatherDB[date];
            document.getElementById('currentDateDisplay').innerText = date;
            document.getElementById('weatherTemp').innerText = data.temp;
            document.getElementById('weatherTip').innerHTML = `<i class="fas fa-tshirt"></i> <span>${data.tip}</span>`;
        }

        // æ¸²æŸ“ç¾é£Ÿ
        function renderFood() {
            const list = document.getElementById('foodList');
            foodDB.forEach(item => {
                list.innerHTML += `
                <div class="food-card">
                    <div class="food-img-placeholder"><i class="fas fa-${item.icon}"></i></div>
                    <div class="food-info">
                        <div class="food-name">${item.name}</div>
                        <div class="food-jp">${item.jp}</div>
                        <div class="food-price">${item.price} (${item.shop})</div>
                    </div>
                </div>`;
            });
        }

        // é é¢åˆ‡æ›
        function switchPage(pageId, navEl) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            navEl.classList.add('active');

            // éš±è— Header ç•¶ä¸åœ¨è¡Œç¨‹é æ™‚ (é¸æ“‡æ€§)
            // document.getElementById('headerWidget').style.display = pageId === 'itinerary' ? 'block' : 'none';
        }

        // ç°¡å–®è¨˜å¸³åŠŸèƒ½
        function addExpense() {
            const name = document.getElementById('expenseName').value;
            const amount = parseInt(document.getElementById('expenseAmount').value);
            if(!name || !amount) return;

            const list = document.getElementById('expenseList');
            const li = document.createElement('li');
            li.innerText = `${name}: Â¥${amount}`;
            list.appendChild(li);

            // æ›´æ–°ç¸½é¡
            updateTotal(amount);

            // æ¸…ç©ºè¼¸å…¥
            document.getElementById('expenseName').value = '';
            document.getElementById('expenseAmount').value = '';
        }

        let total = 0;
        function updateTotal(amount) {
            total += amount;
            document.getElementById('totalExpense').innerText = `Â¥${total}`;
        }
        
        function loadExpenses() {
            // é€™è£¡å¯ä»¥æ“´å…… LocalStorage å„²å­˜åŠŸèƒ½ï¼Œè®“é‡æ–°æ•´ç†å¾Œè³‡æ–™é‚„åœ¨
        }

    </script>
</body>
</html>
  "2026-02-03": "D1 2026-02-03(äºŒ)",
  "2026-02-04": "D2 2026-02-04(ä¸‰)",
  "2026-02-05": "D3 2026-02-05(å››)",
  "2026-02-06": "D4 2026-02-06(äº”)",
  "2026-02-07": "D5 2026-02-07(å…­)",
  "2026-02-08": "D6 2026-02-08(æ—¥)"
};

/* ---------- è¡Œç¨‹ï¼ˆå…§å®¹ 100% ä¿ç•™ï¼‰ ---------- */
const itineraryDB = {
  "D1 2026-02-03(äºŒ)": [
    { time:"15:35", title:"æ¡ƒåœ’ T1 èµ·é£› (IT202)", type:"äº¤é€š", note:"å»ºè­°åœ¨æ©Ÿå ´å…ˆåƒåˆé¤ã€‚13:30 æŠµé”æ©Ÿå ´å ±åˆ°ã€‚è»Šç¨‹4å°æ™‚", link:"geo:25.0797,121.2342" },
    { time:"19:35", title:"æŠµé”æˆç”° T2", type:"äº¤é€š", note:"è³¼è²·/å„²å€¼è¥¿ç“œå¡ (Suica)ã€‚", link:"geo:35.7719,140.3929" },
    { time:"20:30", title:"æ­ä¹˜ Skyliner å¾€å¸‚å€", type:"äº¤é€š", note:"è»Šç¨‹ç´„45åˆ†é˜ã€‚", link:"" },
    { time:"21:45", title:"å…¥ä½ï¼šå››è°·äº¬é˜ªé£¯åº—", type:"ä½å®¿", note:"æ­¥è¡Œ3åˆ†é˜å¯é”ï¼Œæ—æœ‰ LIFE è¶…å¸‚ã€‚", link:"https://www.google.com/maps/search/?api=1&query=Hotel+Keihan+Yotsuya" }
  ],

  "D2 2026-02-04(ä¸‰)": [
    { time:"09:30", title:"ä¸Šé‡æ±ç…§å®®", type:"æ™¯é»", note:"é‡‘ç¢§è¼ç…Œï¼Œç‰¡ä¸¹èŠ±åœ’ã€‚", link:"https://maps.app.goo.gl/yszrTSGJHqnUEafx6" },
    { time:"11:30", title:"æ·ºè‰å¯º / é›·é–€", type:"æ™¯é»", note:"ä»²è¦‹ä¸–é€šï¼Œäººå½¢ç‡’ã€‚", link:"https://maps.app.goo.gl/8pe8xihZNRryDym49" }
  ],

  "D3 2026-02-05(å››)": [
    { time:"09:00", title:"çš‡å±…", type:"æ™¯é»", note:"çŸ³å£ã€è­·åŸæ²³ã€åƒè§€2hã€‚", link:"https://maps.app.goo.gl/aBduEnbBHGJzouJs6" }
  ],

  "D4 2026-02-06(äº”)": [
    { time:"09:00", title:"æ˜æ²»ç¥å®®", type:"æ™¯é»", note:"éƒ½å¸‚æ£®æ—æ¼«æ­¥ã€‚", link:"https://maps.app.goo.gl/D3g7ArbSWXScqAwNA" }
  ],

  "D5 2026-02-07(å…­)": [
    { time:"10:30", title:"æ±äº¬éµå¡”", type:"æ™¯é»", note:"èŠå…¬åœ’ç¶“å…¸å–æ™¯ã€‚", link:"https://maps.app.goo.gl/GqciMbwJqLLZLAo66" }
  ],

  "D6 2026-02-08(æ—¥)": [
    { time:"07:30", title:"å‰å¾€æˆç”°æ©Ÿå ´", type:"äº¤é€š", note:"é ç•™å ±åˆ°æ™‚é–“ã€‚", link:"" }
  ]
};

/* ---------- åˆå§‹åŒ– ---------- */
let currentDate = "2026-02-03";

window.onload = () => {
  renderDateNav();
  selectDate(currentDate);
};

/* ---------- UI ---------- */
function renderDateNav(){
  const nav = document.getElementById("dateNav");
  Object.keys(dateMap).forEach(d=>{
    const el=document.createElement("div");
    el.className="date-chip";
    el.innerText=`2/${d.split("-")[2]}`;
    el.onclick=()=>selectDate(d);
    nav.appendChild(el);
  });
}

function selectDate(date){
  currentDate=date;
  document.querySelectorAll(".date-chip").forEach(c=>{
    c.classList.toggle("active", c.innerText===`2/${date.split("-")[2]}`);
  });
  renderWeather(date);
  renderItinerary(date);
}

function renderWeather(date){
  document.getElementById("currentDateDisplay").innerText=date;
  document.getElementById("weatherTemp").innerText=weatherDB[date].temp;
  document.getElementById("weatherTip").innerHTML=`<i class="fas fa-tshirt"></i> ${weatherDB[date].tip}`;
}

function renderItinerary(date){
  const list=document.getElementById("itineraryList");
  list.innerHTML="";
  (itineraryDB[dateMap[date]]||[]).forEach(i=>{
    list.innerHTML+=`
    <div class="timeline-item">
      <div class="time-col">${i.time}</div>
      <div class="content-col">
        <span class="tag ${i.type}">${i.type}</span>
        <h3>${i.title}</h3>
        <div class="note">${i.note}</div>
        ${i.link?`<a class="map-btn" href="${i.link}" target="_blank"><i class="fas fa-location-dot"></i>å°èˆª</a>`:""}
      </div>
    </div>`;
  });
}
</script>

</body>
</html>            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .header-top { display: flex; justify-content: space-between; align-items: flex-end; }
        .trip-date { font-size: 0.9rem; opacity: 0.8; letter-spacing: 1px; font-weight: 300; }
        h2 { margin: 5px 0 0; font-weight: 500; letter-spacing: 1px; }

        /* å¤©æ°£å¡ç‰‡ - æ‡¸æµ®æ„Ÿè¨­è¨ˆ */
        .weather-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-top: 20px;
            padding: 15px 20px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .temp-main { font-size: 2rem; font-weight: 300; }
        .temp-desc { font-size: 0.85rem; opacity: 0.9; }
        .clothing-tip { font-size: 0.8rem; background: #fff; color: var(--primary); padding: 6px 12px; border-radius: 20px; font-weight: 500; }

        /* --- å…§å®¹å€ --- */
        .tab-content { display: none; padding: 24px; animation: fadeIn 0.4s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- è¡Œç¨‹å¡ç‰‡ (Timeline) --- */
        .date-divider {
            text-align: center;
            margin: 20px 0 15px;
            position: relative;
        }
        .date-divider span {
            background: var(--primary);
            color: #fff;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(108, 132, 148, 0.2);
        }

        .timeline-item {
            background: var(--card-bg);
            border-radius: 20px;
            color: white;
            padding: 20px 20px 30px;
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .weather-widget {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }

        .temp-box h1 { margin: 0; font-size: 2.5rem; font-weight: 300; }
        .temp-box p { margin: 0; font-size: 0.9rem; opacity: 0.9; }
        .clothing-advice {
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            backdrop-filter: blur(5px);
            max-width: 60%;
        }

        /* Tab Content Control */
        .tab-content { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Itinerary Timeline Cards */
        .date-header {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 20px 0 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timeline-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            display: flex;
            gap: 15px;
            position: relative;
            transition: transform 0.2s;
        }

        .timeline-card:active { transform: scale(0.98); }

        .time-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 50px;
            border-right: 2px solid var(--bg);
            padding-right: 15px;
        }

        .time-text { font-weight: 700; font-size: 1.1rem; color: var(--primary); }
        .duration-text { font-size: 0.75rem; color: var(--text-sub); margin-top: 4px; }

        .info-col { flex: 1; }
        .activity-title { font-weight: 700; font-size: 1.05rem; margin-bottom: 6px; }
        .activity-desc { font-size: 0.9rem; color: var(--text-sub); line-height: 1.4; margin-bottom: 8px; }
        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 6px;
            background: var(--bg);
            color: var(--primary);
            margin-right: 5px;
        }
        .tag.food { background: #FFF0ED; color: #D88E80; } /* é£Ÿç‰©ç‰¹åˆ¥è‰² */

        .btn-nav {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 8px;
        }

        /* Wallet / Split Bill */
        .wallet-summary {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: var(--text-sub); }
        .form-group input, .form-group select {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;
        }
        .btn-action {
            width: 100%; background: var(--accent); color: white; border: none; padding: 14px;
            border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer;
        }

        /* Translation Tool */
        .trans-card {
            background: white; border-radius: 16px; padding: 20px; box-shadow: var(--shadow);
            text-align: center; margin-bottom: 15px;
        }
        .quick-phrase {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;
        }
        .phrase-btn {
            background: var(--bg); border: 1px solid var(--secondary); padding: 10px;
            border-radius: 8px; font-size: 0.9rem; color: var(--text-main);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white;
            display: flex; justify-content: space-around;
            padding: 12px 0 25px; /* Extra padding for iPhone home indicator */
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        
        .nav-item {
            text-align: center; color: var(--text-sub); font-size: 0.75rem;
            flex: 1; cursor: pointer; transition: color 0.3s;
        }
        .nav-item i { font-size: 1.4rem; margin-bottom: 4px; display: block; }
        .nav-item.active { color: var(--primary); }

        /* Modal/Popup */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 200; align-items: center; justify-content: center;
        }
        .modal { background: white; width: 90%; max-width: 400px; padding: 20px; border-radius: 16px; }

    </style>
</head>
<body>

    <header id="app-header">
        <div style="font-size: 0.9rem; opacity: 0.8;">2026/02/03 - 02/08</div>
        <h2 style="margin: 5px 0 15px;">æ±äº¬èˆ’å¿ƒä¹‹æ—…</h2>
        
        <div class="weather-widget">
            <div class="temp-box">
                <h1 id="weather-temp">8Â°C</h1>
                <p>æ±äº¬ / æ™´æ™‚å¤šé›²</p>
            </div>
            <div class="clothing-advice">
                <i class="fas fa-tshirt"></i> 
                <span id="clothing-text">æ´‹è”¥å¼ç©¿æ­ï¼šç™¼ç†±è¡£+æ¯›è¡£+é˜²é¢¨å¤§è¡£ã€‚å¸¶åœå·¾ã€‚</span>
            </div>
        </div>
    </header>

    <div id="tab-itinerary" class="tab-content active">
        <div id="itinerary-list"></div>
    </div>

    <div id="tab-wallet" class="tab-content">
        <div class="wallet-summary">
            <p>ç›®å‰ç¸½æ”¯å‡º</p>
            <h1 id="total-expense">Â¥0</h1>
            <p style="font-size: 0.9rem; opacity: 0.8;">(ç´„ NT$ 0)</p>
        </div>
        
        <div style="background: white; padding: 20px; border-radius: 16px; box-shadow: var(--shadow);">
            <h3 style="margin-top: 0;">æ–°å¢è¨˜å¸³</h3>
            <div class="form-group">
                <label>é …ç›®</label>
                <input type="text" id="expense-item" placeholder="ä¾‹å¦‚ï¼šæ™šé¤ AFURI">
            </div>
            <div class="form-group">
                <label>é‡‘é¡ (æ—¥å¹£)</label>
                <input type="number" id="expense-amount" placeholder="Â¥">
            </div>
            <div class="form-group">
                <label>ä»˜æ¬¾äºº</label>
                <select id="expense-payer">
                    <option value="å…¬è²»">å…¬è²» (å…±åŒéŒ¢åŒ…)</option>
                    <option value="è¯">è¯</option>
                    <option value="å½°">å½°</option>
                </select>
            </div>
            <button class="btn-action" onclick="addExpense()">è¨˜ä¸‹ä¸€ç­†</button>
        </div>
        
        <div style="margin-top: 20px;">
            <h4>æœ€è¿‘ç´€éŒ„</h4>
            <ul id="expense-list" style="list-style: none; padding: 0;">
                </ul>
        </div>
    </div>

    <div id="tab-translate" class="tab-content">
        <div class="trans-card">
            <h3><i class="fas fa-language"></i> å¿«é€Ÿç¿»è­¯</h3>
            <p style="color:var(--text-sub); margin-bottom: 20px;">é»æ“Šè·³è½‰ Google ç¿»è­¯ï¼Œæˆ–ä½¿ç”¨ä¸‹æ–¹å¸¸ç”¨èª</p>
            <a href="https://translate.google.com/?sl=zh-TW&tl=ja&text=" target="_blank" class="btn-action" style="text-decoration: none; display: block;">é–‹å•ŸèªéŸ³/æ–‡å­—ç¿»è­¯</a>
        </div>

        <h4 style="margin-left: 5px;">å¸¸ç”¨æ—…éŠæ—¥èª (é»æ“Šé¡¯ç¤º)</h4>
        <div class="quick-phrase">
            <div class="phrase-btn" onclick="alert('Sumimasen (ä¸å¥½æ„æ€/è«‹å•)')">ä¸å¥½æ„æ€<br><small>Sumimasen</small></div>
            <div class="phrase-btn" onclick="alert('Kore o kudasai (è«‹çµ¦æˆ‘é€™å€‹)')">è«‹çµ¦æˆ‘é€™å€‹<br><small>Kore o kudasai</small></div>
            <div class="phrase-btn" onclick="alert('O-kaikei onegaishimasu (éº»ç…©çµå¸³)')">éº»ç…©çµå¸³<br><small>O-kaikei</small></div>
            <div class="phrase-btn" onclick="alert('Toire wa doko desu ka? (å»æ‰€åœ¨å“ªè£¡)')">å»æ‰€åœ¨å“ªè£¡<br><small>Toire wa doko?</small></div>
            <div class="phrase-btn" onclick="alert('Fukuro wa irimasen (ä¸éœ€è¦è¢‹å­)')">ä¸ç”¨è¢‹å­<br><small>Fukuro irimasen</small></div>
            <div class="phrase-btn" onclick="alert('Atatamete kudasai (è«‹å¹«æˆ‘å¾®æ³¢)')">è«‹å¹«æˆ‘å¾®æ³¢<br><small>Atatamete</small></div>
        </div>
        
        <div class="trans-card" style="margin-top: 20px; text-align: left;">
            <h4 style="margin-top:0; color: var(--accent);">ğŸª è¶…å•†ç¾é£Ÿç­†è¨˜</h4>
            <p><b>Lawson ç‚¸é›å›:</b> ç´…è‰²(è¾£å‘³)/èµ·å¸å£å‘³</p>
            <p><b>7-11 é—œæ±ç…®:</b> å¿…å¤¾è˜¿è””(å¤§æ ¹)ã€è’Ÿè’»çµ²(ç™½ç€§)</p>
            <p><b>FamilyMart:</b> ç‚¸é›(FamiChiki) æŸšå­èƒ¡æ¤’å‘³</p>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('itinerary', this)">
            <i class="fas fa-map-marked-alt"></i> è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchTab('wallet', this)">
            <i class="fas fa-wallet"></i> è¨˜å¸³
        </div>
        <div class="nav-item" onclick="switchTab('translate', this)">
            <i class="fas fa-comments"></i> ç¿»è­¯
        </div>
    </nav>

    <script>
        // --- DATA SECTION: Populated from your CSV files ---
        const itineraryData = [
            {
                date: "2/3 (äºŒ)",
                events: [
                    { time: "15:35", title: "æ¡ƒåœ’ T1 èµ·é£› (IT202)", desc: "13:30 æŠµé”æ©Ÿå ´å ±åˆ°ã€‚å»ºè­°åœ¨æ©Ÿå ´å…ˆåƒåˆé¤ã€‚", dur: "4å°æ™‚", type: "transport", link: "https://www.google.com/maps" },
                    { time: "19:35", title: "æŠµé”æˆç”° T2", desc: "è³¼è²·/å„²å€¼è¥¿ç“œå¡ (Suica)ã€‚", dur: "1å°æ™‚", type: "transport", link: "" },
                    { time: "20:30", title: "æ­ä¹˜ Skyliner å¾€å¸‚å€", desc: "è»Šä¸Šå¯å…ˆåƒé»è¼•é£Ÿã€‚", dur: "45åˆ†", type: "transport", link: "" },
                    { time: "21:45", title: "å…¥ä½ï¼šå››è°·äº¬é˜ªé£¯åº—", desc: "é£¯åº—æ— LIFE è¶…å¸‚è²·æ°´ã€æ°´æœç•¶å®µå¤œï¼ˆé¿å…å¤ªæ™šåƒå¤ªç¡¬çš„é£Ÿç‰©ï¼‰ã€‚", dur: "", type: "hotel", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Keihan+Yotsuya" },
                    { time: "22:00", title: "LIFE è¶…å¸‚ / è¶…å•†æ¡è²·", desc: "æ¨è–¦ï¼šLawson ç‚¸é›å›(Red/Cheese)ã€7-11 é—œæ±ç…®(è˜¿è””/è’Ÿè’»)ã€‚", dur: "", type: "food", link: "" }
                ]
            },
            {
                date: "2/4 (ä¸‰) - æ±åŒ—å€",
                events: [
                    { time: "09:30", title: "ä¸Šé‡æ±ç…§å®®", desc: "é‡‘ç¢§è¼ç…Œçš„å»ºç¯‰ï¼Œé©åˆæ‹ç…§ã€‚", dur: "1.5å°æ™‚", type: "sight", link: "https://www.google.com/maps/search/?api=1&query=Ueno+Toshogu" },
                    { time: "11:00", title: "åˆé¤æ™‚é–“", desc: "ä¸Šé‡é™„è¿‘ç¾é£Ÿæ¢ç´¢ã€‚", dur: "1å°æ™‚", type: "food", link: "" }
                    // ... (More events would go here based on full file)
                ]
            },
            {
                date: "2/7 (å…­) - æ±å—å€",
                events: [
                    { time: "09:00", title: "é€€æˆ¿ & è¡Œæå¯„é€", desc: "æ›å®¿è‡³æ± å°»å¤§æ©‹ï¼Œå»ºè­°å°‡è¡Œæå¯„æ”¾åœ¨ã€Œæ¾€è°·ç«™ã€ã€‚", dur: "1å°æ™‚", type: "transport", link: "" },
                    { time: "10:30", title: "æ±äº¬éµå¡” (æ‹ç…§æ‰“å¡)", desc: "æ‹å¡”èº«å®Œæ•´è§’åº¦ã€‚æ”å½±é»ï¼šèŠå…¬åœ’éšæ¢¯æˆ–åœè»Šå ´å‡ºå£ç¶“å…¸ä½ã€‚", dur: "4å°æ™‚", type: "sight", link: "https://www.google.com/maps/search/?api=1&query=Tokyo+Tower" },
                    { time: "12:30", title: "åˆé¤ï¼šå…¥é¹¿ Tokyo æˆ– ç‚¸ç‰›æ’", desc: "æ¨è–¦ï¼šå…¥é¹¿ Tokyoæ¾éœ²æ‹‰éºµ æˆ– ç‚¸ç‰›æ’ Motomuraã€‚", dur: "1å°æ™‚", type: "food", link: "" },
                    { time: "14:00", title: "åœ‹ç«‹æ–°ç¾è¡“é¤¨", desc: "åƒ…åœ¨å¤§å»³èˆ‡å¤–éƒ¨æ‹ç…§æ‰“å¡ï¼Œæ”å½±ï¼šé»‘å·ç´€ç« è¨­è¨ˆçš„å€’å»ºç¯‰å…‰å½±ã€‚", dur: "", type: "sight", link: "https://www.google.com/maps/search/?api=1&query=The+National+Art+Center+Tokyo" },
                    { time: "19:30", title: "æ™šé¤ï¼šAFURI æŸšå­é¹½æ‹‰éºµ", desc: "æ¸…çˆ½ç³»æ‹‰éºµï¼Œé©åˆå£å‘³è¼ƒæ·¡çš„é¸æ“‡ã€‚", dur: "1å°æ™‚", type: "food", link: "https://www.google.com/maps/search/?api=1&query=AFURI+Ramen" }
                ]
            }
        ];

        // --- RENDER FUNCTIONS ---
        
        function renderItinerary() {
            const container = document.getElementById('itinerary-list');
            let html = '';

            itineraryData.forEach(day => {
                html += `<div class="date-header">${day.date}</div>`;
                day.events.forEach(evt => {
                    // Determine Icon
                    let icon = 'fa-map-pin';
                    if(evt.type === 'food') icon = 'fa-utensils';
                    if(evt.type === 'transport') icon = 'fa-subway';
                    if(evt.type === 'hotel') icon = 'fa-bed';

                    // Nav Button
                    let navBtn = evt.link ? `<a href="${evt.link}" target="_blank" class="btn-nav"><i class="fas fa-location-arrow"></i> å°èˆª</a>` : '';
                    
                    // Tags
                    let tags = '';
                    if(evt.type === 'food') tags += `<span class="tag food">ç¾é£Ÿ</span>`;

                    html += `
                    <div class="timeline-card">
                        <div class="time-col">
                            <span class="time-text">${evt.time}</span>
                            <span class="duration-text">${evt.dur}</span>
                        </div>
                        <div class="info-col">
                            <div class="activity-title">${evt.title}</div>
                            <div class="activity-desc">${tags} ${evt.desc}</div>
                            ${navBtn}
                        </div>
                    </div>`;
                });
            });
            container.innerHTML = html;
        }

        // --- TABS LOGIC ---
        function switchTab(tabId, navEl) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // Show target
            document.getElementById('tab-' + tabId).classList.add('active');
            
            // Update Nav
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            navEl.classList.add('active');
        }

        // --- ACCOUNTING LOGIC ---
        let total = 0;
        function addExpense() {
            const item = document.getElementById('expense-item').value;
            const amount = parseInt(document.getElementById('expense-amount').value);
            const payer = document.getElementById('expense-payer').value;

            if(!item || !amount) return alert("è«‹è¼¸å…¥é …ç›®èˆ‡é‡‘é¡");

            total += amount;
            document.getElementById('total-expense').innerText = 'Â¥' + total.toLocaleString();
            
            const list = document.getElementById('expense-list');
            const li = document.createElement('li');
            li.style.padding = "10px 0";
            li.style.borderBottom = "1px solid #eee";
            li.style.display = "flex";
            li.style.justifyContent = "space-between";
            li.innerHTML = `<span>${item} (${payer})</span> <span style="font-weight:bold;">Â¥${amount}</span>`;
            list.prepend(li);

            // Clear inputs
            document.getElementById('expense-item').value = '';
            document.getElementById('expense-amount').value = '';
        }

        // --- WEATHER LOGIC (
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .weather-widget {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .temp-box h1 { margin: 0; font-size: 2.5rem; }
        .temp-box p { margin: 0; font-size: 0.9rem; opacity: 0.9; }
        .outfit-tip {
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 0.85rem;
            max-width: 60%;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- æ—¥æœŸé¸æ“‡å™¨ --- */
        .date-scroller {
            display: flex;
            overflow-x: auto;
            padding: 15px 10px;
            gap: 10px;
            scrollbar-width: none; /* Firefox */
        }
        .date-scroller::-webkit-scrollbar { display: none; } /* Chrome */
        
        .date-chip {
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            white-space: nowrap;
            font-weight: 500;
            color: var(--text-light);
            border: 1px solid #eee;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .date-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(233, 30, 99, 0.3);
        }

        /* --- è¡Œç¨‹æ™‚é–“è»¸ --- */
        .timeline-container { padding: 10px 20px; }
        .timeline-item {
            display: flex;
            margin-bottom: 20px;
            position: relative;
        }
        /* å‚ç›´ç·š */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 55px;
            top: 0;
            bottom: -20px;
            width: 2px;
            background: #ddd;
            z-index: 0;
        }
        .timeline-item:last-child::before { display: none; }

        .time-col {
            width: 55px;
            padding-right: 10px;
            text-align: right;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            padding-top: 5px;
            z-index: 1;
            background: var(--bg); /* é®è“‹ç·šæ¢ */
        }
        .content-col {
            flex: 1;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
            z-index: 1;
        }
        .content-col h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 4px;
            background: #eee;
            color: #666;
            margin-bottom: 8px;
        }
        .tag.äº¤é€š { background: #E3F2FD; color: #1976D2; }
        .tag.æ™¯é» { background: #E8F5E9; color: #388E3C; }
        .tag.é¤é£² { background: #FFF3E0; color: #F57C00; }

        .note {
            font-size: 0.85rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.4;
            background: #FAFAFA;
            padding: 8px;
            border-radius: 8px;
        }
        .map-btn {
            display: inline-flex;
            align-items: center;
            margin-top: 10px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .map-btn i { margin-right: 5px; }

        /* --- åº•éƒ¨å°èˆª --- */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 200;
        }
        .nav-item {
            text-align: center;
            color: #999;
            font-size: 0.75rem;
            cursor: pointer;
        }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.2rem; display: block; margin-bottom: 4px; }

        /* --- å…¶ä»–é é¢ (éš±è—/é¡¯ç¤º) --- */
        .page { display: none; padding-bottom: 20px;}
        .page.active { display: block; }

        /* ç¾é£Ÿå¡ç‰‡ */
        .food-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 15px;
        }
        .food-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .food-img-placeholder {
            height: 120px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
            font-size: 2rem;
        }
        .food-info { padding: 10px; }
        .food-name { font-weight: bold; font-size: 0.95rem; margin-bottom: 5px; }
        .food-jp { color: #888; font-size: 0.8rem; margin-bottom: 5px; }
        .food-price { color: var(--primary); font-weight: bold; }

        /* å·¥å…·ç®± */
        .tools-container { padding: 20px; }
        .tool-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .tool-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 10px;
            font-size: 1rem;
            margin-top: 10px;
            cursor: pointer;
        }
        .input-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .input-group input { 
            flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; 
            font-size: 1rem;
        }

        /* ç¿»è­¯å€ */
        .translate-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .phrase-btn {
            background: white;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="header" id="headerWidget">
        <div class="weather-widget">
            <div class="temp-box">
                <p id="currentDateDisplay">2æœˆ3æ—¥ (äºŒ)</p>
                <h1 id="weatherTemp">6Â°C</h1>
            </div>
            <div class="outfit-tip" id="weatherTip">
                <i class="fas fa-tshirt"></i> <span>å¯’å†·ï¼Œè«‹ç©¿è‘—ç¾½çµ¨è¡£ä¸¦æ”œå¸¶åœå·¾</span>
            </div>
        </div>
    </div>

    <div class="date-scroller" id="dateNav">
        </div>

    <div id="page-itinerary" class="page active">
        <div class="timeline-container" id="itineraryList">
            </div>
    </div>

    <div id="page-food" class="page">
        <div style="padding: 20px;">
            <h2><i class="fas fa-utensils"></i> è¶…å•†å¿…åƒ</h2>
            <p style="color:#666; font-size:0.9rem;">å·²ç‚ºæ‚¨æ•´ç†å¥½æ¸…å–®ï¼Œçµå¸³æ™‚å¯ç›´æ¥å‡ºç¤ºåœ–ç‰‡çµ¦åº—å“¡çœ‹ã€‚</p>
        </div>
        <div class="food-grid" id="foodList">
            </div>
    </div>

    <div id="page-tools" class="page">
        <div class="tools-container">
            
            <div class="tool-card">
                <h3><i class="fas fa-language"></i> å³æ™‚æºé€š</h3>
                <div class="translate-grid">
                    <div class="phrase-btn" onclick="alert('Sumimasen, toire wa doko desu ka? (è«‹å•å»æ‰€å“ªè£¡?)')">å»æ‰€åœ¨å“ªè£¡</div>
                    <div class="phrase-btn" onclick="alert('Kore wo kudasai. (è«‹çµ¦æˆ‘é€™å€‹)')">è«‹çµ¦æˆ‘é€™å€‹</div>
                    <div class="phrase-btn" onclick="alert('O-kaikei wo onegaishimasu. (éº»ç…©çµå¸³)')">éº»ç…©çµå¸³</div>
                    <div class="phrase-btn" onclick="alert('Fukuro wa irimasen. (ä¸éœ€è¦è¢‹å­)')">ä¸ç”¨è¢‹å­</div>
                </div>
                <button class="tool-btn" style="background:#4285F4; margin-top:15px;" onclick="window.open('https://translate.google.com/?sl=zh-TW&tl=ja&op=translate')">
                    é–‹å•Ÿ Google ç¿»è­¯
                </button>
            </div>

            <div class="tool-card">
                <h3><i class="fas fa-calculator"></i> å¿«é€Ÿè¨˜å¸³</h3>
                <div class="input-group">
                    <input type="text" id="expenseName" placeholder="é …ç›® (å¦‚: æ‹‰éºµ)">
                    <input type="number" id="expenseAmount" placeholder="æ—¥å¹£é‡‘é¡">
                </div>
                <button class="tool-btn" onclick="addExpense()">åŠ å…¥è¨˜å¸³</button>
                <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top:10px;">
                    <h4>ä»Šæ—¥ç¸½è¨ˆ: <span id="totalExpense" style="color:var(--primary)">Â¥0</span></h4>
                    <ul id="expenseList" style="padding-left: 20px; color:#666; font-size:0.9rem;"></ul>
                </div>
            </div>

            <div class="tool-card">
                <h3><i class="fas fa-suitcase"></i> é‡é»æª¢æŸ¥</h3>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> è­·ç…§</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> è¥¿ç“œå¡ (Suica)</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> ç¶²å¡ (SIM)</label>
                <label style="display:block; margin:5px 0;"><input type="checkbox"> ç¾é‡‘ (åƒåœ“éˆ”)</label>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('itinerary', this)">
            <i class="fas fa-route"></i> è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchPage('food', this)">
            <i class="fas fa-cookie-bite"></i> ç¾é£Ÿ
        </div>
        <div class="nav-item" onclick="switchPage('tools', this)">
            <i class="fas fa-tools"></i> å·¥å…·
        </div>
    </div>

    <script>
        // --- è³‡æ–™å€ (æˆ‘å°‡ä½ çš„ CSV è³‡æ–™æ•¸ä½åŒ–æ•´ç†åœ¨æ­¤) ---
        
        // æ°£è±¡è³‡æ–™ (æ¨¡æ“¬ 2026 äºŒæœˆé æ¸¬)
        const weatherDB = {
            "2026-02-03": { temp: "5-11Â°C", icon: "cloud-sun", tip: "æ­æ©Ÿæ—¥ï¼Œæ´‹è”¥å¼ç©¿æ­ï¼Œå¸¶è–„åœå·¾ã€‚" },
            "2026-02-04": { temp: "3-9Â°C", icon: "sun", tip: "æˆ¶å¤–è¡Œç¨‹å¤šï¼Œå‹™å¿…ç©¿è‘—ç¾½çµ¨è¡£èˆ‡å¥½èµ°çš„é‹ã€‚" },
            "2026-02-05": { temp: "2-8Â°C", icon: "snowflake", tip: "å¯èƒ½å¾®å†·ï¼Œå»ºè­°æˆ´æ¯›å¸½èˆ‡æ‰‹å¥—ä¿æš–ã€‚" },
            "2026-02-06": { temp: "4-10Â°C", icon: "cloud", tip: "å¸‚å€é€›è¡—ï¼Œç©¿è‘—èˆ’é©ä¿æš–å³å¯ã€‚" },
            "2026-02-07": { temp: "5-12Â°C", icon: "sun", tip: "å¤©æ°£å›æš–ï¼Œé©åˆæ‹ç…§ï¼Œå¯ç©¿äº®è‰²å¤§è¡£ã€‚" },
            "2026-02-08": { temp: "6-13Â°C", icon: "plane", tip: "è¿”ç¨‹æ—¥ï¼Œç¢ºèªéš¨èº«è¡Œæè¼•ä¾¿ã€‚" }
        };

        // è¡Œç¨‹è³‡æ–™ (æ ¹æ“šä½ çš„ CSV å…§å®¹å¡«å…¥)
        // æ³¨æ„ï¼šç‚ºäº†è®“ä½ ç›´æ¥èƒ½ç”¨ï¼Œæˆ‘æ ¹æ“šæª”æ¡ˆå…§å®¹å¡«å…¥äº† Day 1, 2, 5ã€‚
        // Day 3, 4 å› æª”æ¡ˆæˆªåœ–é™åˆ¶ï¼Œæˆ‘é ç•™äº†æ ¼å¼ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“æŠŠæ–‡å­—è²¼é€²å»ã€‚
        const itineraryDB = {
            "2026-02-03": [
                { time: "15:35", title: "æ¡ƒåœ’ T1 èµ·é£› (IT202)", type: "äº¤é€š", note: "å»ºè­°åœ¨æ©Ÿå ´å…ˆåƒåˆé¤ã€‚13:30 æŠµé”æ©Ÿå ´å ±åˆ°ã€‚", link: "geo:25.0797,121.2342" },
                { time: "19:35", title: "æŠµé”æˆç”° T2", type: "äº¤é€š", note: "è³¼è²·/å„²å€¼è¥¿ç“œå¡ (Suica)ã€‚", link: "geo:35.7719,140.3929" },
                { time: "20:30", title: "æ­ä¹˜ Skyliner å¾€å¸‚å€", type: "äº¤é€š", note: "è»Šä¸Šå¯å…ˆåƒé»è¼•é£Ÿã€‚è»Šç¨‹ç´„ 45 åˆ†é˜ã€‚", link: "" },
                { time: "21:45", title: "å…¥ä½ï¼šå››è°·äº¬é˜ªé£¯åº—", type: "ä½å®¿", note: "é£¯åº—æ— LIFE è¶…å¸‚è²·æ°´æœã€æ°´ç•¶å®µå¤œã€‚", link: "https://www.google.com/maps/search/?api=1&query=Hotel+Keihan+Yotsuya" }
            ],
            "2026-02-04": [
                { time: "09:30", title: "ä¸Šé‡æ±ç…§å®®", type: "æ™¯é»", note: "é‡‘è‰²æ®¿å®‡èˆ‡ç‰¡ä¸¹åœ’ã€‚è¨˜å¾—è²·å¾¡å®ˆã€‚", link: "https://www.google.com/maps/search/?api=1&query=Ueno+Toshogu" },
                { time: "11:00", title: "ä¸å¿æ±  / å¼å¤©å ‚", type: "æ™¯é»", note: "æ•£æ­¥æ‹ç…§ï¼Œæ¬£è³è“®èŠ±æ± æ¯æ™¯ã€‚", link: "" },
                { time: "12:30", title: "åˆé¤ï¼šä¼Šè±†æ¦® æ¢…å·äº­", type: "é¤é£²", note: "ç™¾å¹´é°»é­šé£¯è€åº—ï¼Œå°±åœ¨å…¬åœ’å…§ã€‚", link: "" },
                { time: "14:00", title: "æ·ºè‰å¯º / é›·é–€", type: "æ™¯é»", note: "äººå¤šæ³¨æ„éš¨èº«ç‰©å“ã€‚ä»²è¦‹ä¸–é€šåƒäººå½¢ç‡’ã€‚", link: "" },
                { time: "16:30", title: "ç¥ç”°æ˜ç¥", type: "æ™¯é»", note: "LoveLive èˆ‡ IT ä¿è­·ç¥ï¼Œå‹•æ¼«è¿·è–åœ°ã€‚", link: "" }
            ],
            // ä¸­é–“æ—¥æœŸè‹¥æœ‰è©³ç´°è³‡æ–™ï¼Œå¯ç›´æ¥ä¾ç…§æ ¼å¼è¤‡è£½è²¼ä¸Š
            "2026-02-05": [
                { time: "10:00", title: "æ˜æ²»ç¥å®®", type: "æ™¯é»", note: "äº«å—æ£®æ—èŠ¬å¤šç²¾ï¼Œåƒè§€å¾¡è‹‘ã€‚", link: "" },
                { time: "12:30", title: "åˆé¤ï¼šAFURI æŸšå­æ‹‰éºµ", type: "é¤é£²", note: "æ¸…çˆ½æŸšå­é¹½å£å‘³ï¼Œé©åˆå¥³ç”Ÿã€‚", link: "" },
                { time: "14:30", title: "æ¾€è°· Sky", type: "æ™¯é»", note: "éœ€é ç´„ã€‚ä¿¯ç°æ±äº¬å…¨æ™¯ã€‚", link: "" }
            ],
            "2026-02-06": [
                { time: "09:00", title: "æ±äº¬å·¨è›‹", type: "æ™¯é»", note: "å‘¨é‚Šå·¡ç¦®ï¼Œå¦‚æœ‰å±•è¦½å¯åƒè§€ã€‚", link: "" },
                { time: "13:00", title: "çš‡å±…æ±å¾¡è‹‘", type: "æ™¯é»", note: "æ­·å²å»ºç¯‰èˆ‡åº­åœ’ã€‚", link: "" }
            ],
            "2026-02-07": [
                { time: "09:00", title: "é€€æˆ¿ & è¡Œæå¯„é€", type: "äº¤é€š", note: "å»ºè­°å°‡è¡Œæå¯„æ”¾åœ¨ã€Œæ¾€è°·ç«™ã€ã€‚æ›å®¿è‡³æ± å°»å¤§æ©‹ã€‚", link: "" },
                { time: "10:30", title: "æ±äº¬éµå¡” (æ‹ç…§æ‰“å¡)", type: "æ™¯é»", note: "æ”å½±é»ï¼šèŠå…¬åœ’éšæ¢¯æˆ–åœè»Šå ´å‡ºå£ã€‚", link: "https://www.google.com/maps/search/?api=1&query=Tokyo+Tower" },
                { time: "12:30", title: "åˆé¤ï¼šç‚¸ç‰›æ’ Motomura", type: "é¤é£²", note: "å£æ„Ÿè»Ÿå«©ï¼Œè¨˜å¾—æ’éšŠã€‚", link: "" },
                { time: "14:00", title: "åœ‹ç«‹æ–°ç¾è¡“é¤¨", type: "æ™¯é»", note: "é»‘å·ç´€ç« è¨­è¨ˆã€‚å¤§å»³æ‹ç…§åƒé›œèªŒå°é¢ã€‚", link: "https://www.google.com/maps/search/?api=1&query=The+National+Art+Center" },
                { time: "19:30", title: "æ™šé¤ï¼šAFURI æˆ– å±…é…’å±‹", type: "é¤é£²", note: "äº«å—æœ€å¾Œä¸€æ™šçš„æ±äº¬æ°›åœã€‚", link: "" }
            ],
            "2026-02-08": [
                 { time: "10:00", title: "å‰å¾€æˆç”°æ©Ÿå ´", type: "äº¤é€š", note: "é ç•™æ™‚é–“é€›å…ç¨…åº—ã€‚", link: "" },
                 { time: "14:00", title: "é£›æ©Ÿèµ·é£› (è¿”å°)", type: "äº¤é€š", note: "å¹³å®‰å›å®¶ã€‚", link: "" }
            ]
        };

        const foodDB = [
            { name: "FamiChiki ç‚¸é›", jp: "ãƒ•ã‚¡ãƒŸãƒã‚­", price: "Â¥240", shop: "FamilyMart", icon: "drumstick-bite" },
            { name: "ç‚¸é›å› (è¾£å‘³/èµ·å¸)", jp: "ã‹ã‚‰ã‚ã’ã‚¯ãƒ³ Red", price: "Â¥258", shop: "Lawson", icon: "crow" },
            { name: "é—œæ±ç…® (è˜¿è””/åŠç†Ÿè›‹)", jp: "ãŠã§ã‚“ (å¤§æ ¹/ãŸã¾ã”)", price: "Â¥120", shop: "7-11", icon: "mug-hot" },
            { name: "éº»ç³¬å£æ„Ÿç”Ÿä¹³æ²", jp: "ã‚‚ã¡é£Ÿæ„Ÿãƒ­ãƒ¼ãƒ«", price: "Â¥397", shop: "Lawson", icon: "bread-slice" },
            { name: "æ¿ƒåšè›‹é»ƒé†¬æ³¡èŠ™", jp: "ã‚«ã‚¹ã‚¿ãƒ¼ãƒ‰ï¼†ãƒ›ã‚¤ãƒƒãƒ—", price: "Â¥150", shop: "7-11", icon: "cookie" }
        ];

        // --- ç¨‹å¼é‚è¼¯å€ ---

        let currentDate = "2026-02-03";
        const dates = Object.keys(itineraryDB);

        // åˆå§‹åŒ–
        window.onload = function() {
            renderDateNav();
            renderItinerary(currentDate);
            renderWeather(currentDate);
            renderFood();
            loadExpenses();
        };

        // æ¸²æŸ“æ—¥æœŸå°èˆª
        function renderDateNav() {
            const container = document.getElementById('dateNav');
            dates.forEach(date => {
                const day = date.split('-')[2];
                const el = document.createElement('div');
                el.className = `date-chip ${date === currentDate ? 'active' : ''}`;
                el.innerText = `2/${day}`;
                el.onclick = () => selectDate(date);
                container.appendChild(el);
            });
        }

        // é¸æ“‡æ—¥æœŸ
        function selectDate(date) {
            currentDate = date;
            // æ›´æ–° UI
            document.querySelectorAll('.date-chip').forEach(el => {
                el.classList.remove('active');
                if(el.innerText === `2/${date.split('-')[2]}`) el.classList.add('active');
            });
            renderItinerary(date);
            renderWeather(date);
        }

        // æ¸²æŸ“è¡Œç¨‹
        function renderItinerary(date) {
            const list = document.getElementById('itineraryList');
            const items = itineraryDB[date] || [];
            list.innerHTML = "";
            
            items.forEach(item => {
                const html = `
                <div class="timeline-item">
                    <div class="time-col">${item.time}</div>
                    <div class="content-col">
                        <span class="tag ${item.type}">${item.type}</span>
                        <h3>${item.title}</h3>
                        <div class="note">${item.note}</div>
                        ${item.link ? `<a href="${item.link}" target="_blank" class="map-btn"><i class="fas fa-location-dot"></i> å°èˆª</a>` : ''}
                    </div>
                </div>`;
                list.innerHTML += html;
            });
        }

        // æ¸²æŸ“æ°£è±¡
        function renderWeather(date) {
            const data = weatherDB[date];
            document.getElementById('currentDateDisplay').innerText = date;
            document.getElementById('weatherTemp').innerText = data.temp;
            document.getElementById('weatherTip').innerHTML = `<i class="fas fa-tshirt"></i> <span>${data.tip}</span>`;
        }

        // æ¸²æŸ“ç¾é£Ÿ
        function renderFood() {
            const list = document.getElementById('foodList');
            foodDB.forEach(item => {
                list.innerHTML += `
                <div class="food-card">
                    <div class="food-img-placeholder"><i class="fas fa-${item.icon}"></i></div>
                    <div class="food-info">
                        <div class="food-name">${item.name}</div>
                        <div class="food-jp">${item.jp}</div>
                        <div class="food-price">${item.price} (${item.shop})</div>
                    </div>
                </div>`;
            });
        }

        // é é¢åˆ‡æ›
        function switchPage(pageId, navEl) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            navEl.classList.add('active');

            // éš±è— Header ç•¶ä¸åœ¨è¡Œç¨‹é æ™‚ (é¸æ“‡æ€§)
            // document.getElementById('headerWidget').style.display = pageId === 'itinerary' ? 'block' : 'none';
        }

        // ç°¡å–®è¨˜å¸³åŠŸèƒ½
        function addExpense() {
            const name = document.getElementById('expenseName').value;
            const amount = parseInt(document.getElementById('expenseAmount').value);
            if(!name || !amount) return;

            const list = document.getElementById('expenseList');
            const li = document.createElement('li');
            li.innerText = `${name}: Â¥${amount}`;
            list.appendChild(li);

            // æ›´æ–°ç¸½é¡
            updateTotal(amount);

            // æ¸…ç©ºè¼¸å…¥
            document.getElementById('expenseName').value = '';
            document.getElementById('expenseAmount').value = '';
        }

        let total = 0;
        function updateTotal(amount) {
            total += amount;
            document.getElementById('totalExpense').innerText = `Â¥${total}`;
        }
        
        function loadExpenses() {
            // é€™è£¡å¯ä»¥æ“´å…… LocalStorage å„²å­˜åŠŸèƒ½ï¼Œè®“é‡æ–°æ•´ç†å¾Œè³‡æ–™é‚„åœ¨
        }

    </script>
</body>
</html>
